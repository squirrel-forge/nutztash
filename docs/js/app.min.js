/*! For license information please see app.min.js.LICENSE.txt */
!function(){"use strict";var t,e,n={},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return n[t](i,i.exports,o),i.exports}function i(t){requestAnimationFrame((function(){var e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(void 0)}))}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function c(t){var e="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(l())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&s(o,n.prototype),o}(t,arguments,f(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)},c(t)}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t,e,n){return(e=d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},o.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);o.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var u=2&r&&n;"object"==typeof u&&!~t.indexOf(u);u=e(u))Object.getOwnPropertyNames(u).forEach((function(t){a[t]=function(){return n[t]}}));return a.default=function(){return n},o.d(i,a),i},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var h,y=function(t){function e(t){var n,r,o,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),p((r=this,i=[t],o=f(o=e),n=function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,l()?Reflect.construct(o,i||[],f(r).constructor):o.apply(r,i))),"previous",null),p(n,"previousToStack",!0),p(n,"previousPrefix","> Caused by: "),n.name=n.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(n,n.constructor):n.stack=new Error(t).stack,n.previous=u||null,n.addPreviousToStack(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(e,t),n=e,(r=[{key:"addPreviousToStack",value:function(){this.previousToStack&&("string"==typeof this.stack?this.previous&&(this.previous instanceof Error||this.previous.toString||"string"==typeof this.previous)&&(this.stack=this.stack+"\n",this.previousPrefix&&(this.stack=this.stack+this.previousPrefix),this.stack=this.stack+("string"==typeof this.previous.stack?this.previous.stack:this.previous)):this.previous&&window.console.error(this,"Caused by",this.previous))}}])&&u(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(c(Error));function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t){return null!==t&&"object"===v(t)&&Object.getPrototypeOf(t)===Object.prototype}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=!!e;var n,r=t instanceof Array,o=b(t),i=r?[]:{};if(r||o){for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(null!==t[n]&&"object"===m(t[n])&&e?i[n]=g(t[n],e):i[n]=t[n]);return i}return t}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e,n){x(t,e),e.set(t,n)}function x(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function j(t,e){return t.get(E(t,e))}function S(t,e,n){return t.set(E(t,e),n),n}function E(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L(r.key),r)}}function T(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function L(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e,n){return e=B(e),function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,M()?Reflect.construct(e,n||[],B(t).constructor):e.apply(t,n))}function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(M=function(){return!!t})()}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}var R=function(t){function e(){return A(this,e),C(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(e,t),T(e)}(y),I=new WeakMap,D=new WeakMap,F=new WeakMap,q=new WeakMap,z=new WeakSet,W=function(){return T((function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(A(this,t),x(this,e=z),e.add(this),_(this,I,null),_(this,D,null),_(this,F,null),_(this,q,{}),null!==n&&!this.constructor.isCompat(n))throw new R("Argument element must be null or a compatible instance");if(null!==r&&!this.constructor.isCompat(r))throw new R("Argument parent must be null or a compatible instance");S(I,this,o),S(D,this,n),S(F,this,r),j(I,this)&&j(I,this).log(this.constructor.name+"::constructed",this)}),[{key:"debug",get:function(){return j(I,this)}},{key:"target",get:function(){return j(D,this)}},{key:"parent",get:function(){return j(F,this)}},{key:"overrideParent",value:function(t){S(F,this,t)}},{key:"isSimulated",get:function(){return null===j(D,this)}},{key:"dispatchEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e=E(z,this,G).call(this,e),j(I,this)&&(j(I,this).groupCollapsed(this.constructor.name+"::dispatchEvent [ "+t+" ]"),j(I,this).log("element >",j(D,this)||this),j(I,this).log("data >",e),j(I,this).groupEnd());var o=new CustomEvent(t,{bubbles:n,cancelable:r,detail:e});return null===j(D,this)?E(z,this,H).call(this,t,o,e):j(D,this).dispatchEvent(o),!o.defaultPrevented}},{key:"hasSimulated",value:function(t){return j(q,this)[t]&&j(q,this)[t].length}},{key:"addEventListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(b(n)||(n={once:!1,capture:n,passive:!1}),"function"!=typeof e)throw new R('Argument callback for event "'+t+'" must be a function');null===j(D,this)?E(z,this,U).call(this,t,e,n):j(D,this).addEventListener(t,e,n),j(I,this)&&(j(I,this).groupCollapsed(this.constructor.name+"::addEventListener [ "+t+" ]"),j(I,this).log("element >",j(D,this)),j(I,this).log("callback >",e),j(I,this).groupEnd())}},{key:"removeEventListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null===j(D,this)?E(z,this,Y).call(this,t,e):j(D,this).removeEventListener(t,e,n)}},{key:"addEventList",value:function(t){for(var e=0;e<t.length;e++)this.addEventListener.apply(this,O(t[e]))}}],[{key:"isCompat",value:function(t){return t.addEventListener&&t.removeEventListener&&t.dispatchEvent}}])}();function G(t){return(t=t||{target:this}).target||(t.target=this),t.current||(t.current=this),t}function H(t,e,n){if(j(q,this)[t]&&j(q,this)[t].length)for(var r=O(j(q,this)[t]),o=0;o<r.length;o++)if(j(q,this)[t].includes(r[o])){try{r[o].apply(this,[e])}catch(t){window.console.error(new R("Simulated event error",t))}if(r[o]&&!0===r[o].__EventDispatcherOnce&&E(z,this,Y).call(this,t,r[o]),e.cancelBubble){j(I,this)&&j(I,this).log(this.constructor.name+"::dispatchEvent simulated [ "+t+" ] broke after",o);break}}if(j(F,this)&&e.bubbles&&!e.cancelBubble)if(j(I,this)&&j(I,this).log(this.constructor.name+"::dispatchEvent bubble [ "+t+" ] to",j(F,this)),j(F,this)instanceof h){var i=g(n);i.current=j(F,this),j(F,this).dispatchEvent(t,i)}else j(F,this).dispatchEvent(e)}function U(t,e,n){j(q,this)[t]||(j(q,this)[t]=[]),j(q,this)[t].push(e),b(n)&&!0===n.once&&(j(q,this)[t][j(q,this)[t].length-1].__EventDispatcherOnce=!0)}function Y(t,e){if(j(q,this)[t])for(var n=0;n<j(q,this)[t].length;n++)j(q,this)[t][n]===e&&j(q,this)[t].splice(n,1)}function J(t){var e=document;"complete"===e.readyState||"loading"!==e.readyState&&!e.documentElement.doScroll?t():e.addEventListener("DOMContentLoaded",(function(){t()}))}function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"smooth",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;if(e||(e=document.documentElement),n instanceof HTMLElement?n=n.getBoundingClientRect().height:"function"==typeof n&&(n=n(t)),"number"!=typeof n||Number.isNaN(n))throw new Error("scrollTo() Argument offset must be a Number, HTMLElement or Function returning a Number");var i=e.scrollTop+t.getBoundingClientRect().top-n;Math.abs(e.scrollTop-i)>=o&&(e===document.documentElement?window.scrollTo({top:i,behavior:r}):(i-=e.getBoundingClientRect().top,e.scrollTo({top:i,behavior:r})))}function V(){for(var t=[],e=0,n=!0,r=!1,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];for(var u=0;u<i.length;u++)i[u]instanceof Array?i[u].forEach((function(e){(!n||n&&!t.includes(e))&&t.push(r?g(e):e)})):e<2&&(0===e?n=!!i[u]:1===e&&(r=!!i[u]),e++);return t}function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function Q(t,e){var n,r,o,i,a,u,c,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];for(n in l=!!l,s=!!s,f=!!f,p=!!p,e)Object.prototype.hasOwnProperty.call(t,n)&&Object.prototype.hasOwnProperty.call(e,n)?(r=Z(t[n]),o=Z(e[n]),i=t[n]instanceof Array,a=e[n]instanceof Array,u=b(t[n]),c=b(e[n]),r+"_"+o=="object_object"?t[n]=s?!p&&i&&a?V(!0,f,t[n],e[n]):u&&c?Q(t[n],e[n],l,s,f,p):g(e[n],!0):e[n]:(l||null===t[n]||null===e[n]||r===o)&&(t[n]=e[n])):l&&void 0===t[n]&&Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=g(e[n],!0));return t}function K(t,e){for(;t.charAt(0)===e;)t=t.substring(1);for(;t.charAt(t.length-1)===e;)t=t.substring(0,t.length-1);return t}function X(t){return K(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/")}function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lt(r.key),r)}}function ot(t,e,n){return e=at(e),function(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,it()?Reflect.construct(e,n||[],at(t).constructor):e.apply(t,n))}function it(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(it=function(){return!!t})()}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},at(t)}function ut(t,e){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ut(t,e)}function ct(t,e,n){return(e=lt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lt(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tt(e)?e:e+""}function st(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}h=W;var ft=new WeakSet,pt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}(t=ot(this,e,[window,null,r]),ft),ct(t,"config",null),ct(t,"initial",null),t.config={offset:0,bind:!0,context:document.body,selector:'[href^="#"], [href*="#"]',scrollContext:null,autoTop:!1,capture:!0,initial:1e3,complete:null},b(n)&&Q(t.config,n),t.config.capture&&st(ft,t,ht).call(t),t.config.bind&&t.bind(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ut(t,e)}(e,t),n=e,r=[{key:"scrollTo",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null!=r?r:this.config.offset;i instanceof Array||(i=[i]),i.unshift(null!=o?o:this.config.scrollContext),i.unshift(t),void 0===e&&(e=this.config.complete),this.dispatchEvent("scroll.before",{scrollTarget:t,params:i},!0,!0)&&(function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r||(r=window),"function"!=typeof t)throw new Error("scrollComplete() Argument callback must be a Function");var o={passive:!0};r.addEventListener("scroll",(function i(){window.clearTimeout(e),e=window.setTimeout((function(){r.removeEventListener("scroll",i,o);try{t()}catch(t){throw window.console.error(t),new Error("scrollComplete() Argument callback caused an error")}}),n)}),o)}((function(){n.dispatchEvent("scroll.after",{scrollTarget:t}),"function"==typeof e&&e(t)})),$.apply(void 0,et(i)))}},{key:"bind",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=e||this.config.context,n=n||this.config.selector;var r=this.config.context.querySelectorAll(n);!r.length&&this.debug&&this.debug.warn(this.constructor.name+"::bind No scrollTo links found in context:",e);for(var o=0;o<r.length;o++)r[o].hasAttribute("data-scrollto")||(r[o].addEventListener("click",(function(e){st(ft,t,dt).call(t,e)})),r[o].setAttribute("data-scrollto","true"))}}],o=[{key:"getUrlWithHash",value:function(t){return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||window.location.href).split("#")[0]+"#"+t}}],r&&rt(n.prototype,r),o&&rt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(W);function dt(t){if("true"===t.currentTarget.getAttribute("data-scrollto")){var e=null,n=t.currentTarget.getAttribute("href"),r=n.indexOf("#");if(0===r)e=n.substring(1);else if(r>0){var o=n.split("#");X(location.pathname)===X(o[0])&&(e=o[1]||"")}var i=document.getElementById(e);!this.config.autoTop||i||""!==e&&"top"!==e||(i=document.body),i?(this.scrollTo(i),t.preventDefault()):this.debug&&this.debug.warn(this.constructor.name+"::event_scrollToClick No valid target for: ",e,t.currentTarget)}}function ht(){var t=this,e=window.location.hash;e&&e.length>1&&(this.initial=document.getElementById(e.substring(1)),this.initial&&history.replaceState(null,document.title,this.constructor.getUrlWithHash("s2:"+e.substring(1)))),"ready"===this.config.initial?J((function(){st(ft,t,vt).call(t,e)})):this.config.initial instanceof Array?st(ft,this,yt).call(this,et(this.config.initial)):"number"==typeof this.config.initial?window.setTimeout((function(){st(ft,t,vt).call(t,e)}),this.config.initial):st(ft,this,vt).call(this,e)}function yt(t,e){var n=this,r=e.shift();if("function"!=typeof r.addEventListener)throw new Error(this.constructor.name+"::capture() First initial argument must be an event target");if("string"!=typeof e[0]||!e[0].length)throw new Error(this.constructor.name+"::capture() Second initial argument must be an event name");if("function"!=typeof e[1])throw new Error(this.constructor.name+"::capture() Thrid initial argument must be an event handler");var o=e[1];e[1]=function(e){o(e,t,(function(){st(ft,n,bt).call(n,t)}))},void 0===e[2]&&(e[2]={once:!0}),r.addEventListener.apply(r,et(e))}function vt(t){var e=this;this.initial instanceof HTMLElement&&this.scrollTo(this.initial,(function(){st(ft,e,bt).call(e,t)}))}function bt(t){history.replaceState(null,document.title,this.constructor.getUrlWithHash(t.substring(1))),this.dispatchEvent("scroll.initial.complete",{initial:this.initial})}function mt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"-"+(performance.now()+"").replace(/\./g,"-"):"";return Math.random().toString(36).substring(2,12)+t}function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function wt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ot(t,e){return t.get(_t(t,e))}function kt(t,e,n){return t.set(_t(t,e),n),n}function _t(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,St(r.key),r)}}function jt(t,e,n){return e&&xt(t.prototype,e),n&&xt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function St(t){var e=function(t,e){if("object"!=gt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(e)?e:e+""}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e,n){return e=Lt(e),function(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tt()?Reflect.construct(e,n||[],Lt(t).constructor):e.apply(t,n))}function Tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tt=function(){return!!t})()}function Lt(t){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lt(t)}function At(t,e){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},At(t,e)}var Ct=function(t){function e(){return Et(this,e),Pt(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(e,t),jt(e)}(y),Mt=new WeakMap,Bt=new WeakMap,Nt=new WeakMap,Rt=function(){return jt((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Et(this,t),wt(this,Mt,void 0),wt(this,Bt,void 0),wt(this,Nt,void 0),"string"!=typeof e)throw new Ct("First argument prefix, must be of type string");kt(Nt,this,e),kt(Mt,this,n),kt(Bt,this,t.available())}),[{key:"prefix",get:function(){return Ot(Nt,this)},set:function(t){if("string"!=typeof t)throw new Ct("Property prefix, must be of type string");kt(Nt,this,t)}},{key:"get",value:function(t){var e;if("string"!=typeof t)throw new Ct("First argument key, must be of type string");var n="".concat(Ot(Nt,this)).concat(t);return Ot(Bt,this)?localStorage.getItem(n):null!==(e=Ot(Mt,this)[n])&&void 0!==e?e:null}},{key:"set",value:function(t,e){if("string"!=typeof t)throw new Ct("First argument key, must be of type string");if("string"!=typeof e)throw new Ct("Second argument value, must be of type string");var n="".concat(Ot(Nt,this)).concat(t);Ot(Bt,this)?localStorage.setItem(n,e):Ot(Mt,this)[n]=e}},{key:"remove",value:function(t){var e="".concat(Ot(Nt,this)).concat(t);Ot(Bt,this)?localStorage.removeItem(e):delete Ot(Mt,this)[e]}},{key:"clear",value:function(){Ot(Bt,this)?localStorage.clear():kt(Mt,this,{})}}],[{key:"available",value:function(){var t=mt();try{return localStorage.setItem(t,t),localStorage.getItem(t)===t&&(localStorage.removeItem(t),!0)}catch(t){return!1}}},{key:"getCurrentSize",value:function(){return new Promise((function(t){var e,n=0;for(e in localStorage)localStorage.hasOwnProperty(e)&&(n+=2*(localStorage[e].length+e.length));t(n)}))}},{key:"testMaxValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25e4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise((function(n){var r,o,i="ls_max",a=parseInt(null!==(r=localStorage.getItem(i))&&void 0!==r?r:"0"),u="value_test",c=e;if(a>0)n(a);else{var l=localStorage.getItem(u);if(l&&l.length)localStorage.setItem(i,"".concat(l.length)),n(l.length);else try{for(;c<t;){var s;if(o="Ü".repeat(c),localStorage.setItem(u,o),(null===(s=localStorage.getItem(u))||void 0===s?void 0:s.length)!==o.length)throw c-=e,new Ct("Value size test miss match");c+=e}}catch(t){}}n(c)}))}},{key:"testMaxClean",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];localStorage.removeItem("value_test"),t&&localStorage.removeItem("ls_max")}}])}();function It(t,e){e.parentNode.insertBefore(t,e.nextSibling)}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ft(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(t instanceof Array||t instanceof NodeList))throw new Error("bindNodeList() First argument elements must be a NodeList or an Array of HTMLElement");if(!(e instanceof Array))throw new Error("bindNodeList() Second argument events must be an Array of addEventListener arguments");for(var o=0;o<t.length;o++)for(var i=0;i<e.length;i++){var a;if(!(e[i]instanceof Array&&e[i].length>1))throw new Error("bindNodeList() Second argument events array must only contain Arrays of addEventListener arguments");(a=t[o])[(r?"remove":"add")+"EventListener"].apply(a,function(t){if(Array.isArray(t))return Dt(t)}(n=e[i])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return Dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function zt(){zt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==qt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(qt(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Wt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("textarea");n.value=t,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch(t){e&&e.error("Failed to copy to clipboard",t)}document.body.removeChild(n)}function Ht(t){return Ut.apply(this,arguments)}function Ut(){var t;return t=zt().mark((function t(e){var n,r=arguments;return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,navigator.clipboard){t.next=4;break}return Gt(e,n),t.abrupt("return",null);case 4:return t.prev=4,t.next=7,navigator.clipboard.writeText(e);case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(4),n&&n.error("Failed to copy to clipboard",t.t0),t.abrupt("return",!1);case 13:return t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t,null,[[4,9]])})),Ut=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Wt(i,r,o,a,u,"next",t)}function u(t){Wt(i,r,o,a,u,"throw",t)}a(void 0)}))},Ut.apply(this,arguments)}function Yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e="number"==typeof e?e:350;var r=0;return function(){for(var o,i=!1,a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];n&&(i=n.apply(void 0,u)),r&&(window.clearTimeout(r),r=0),i||(r=(o=window).setTimeout.apply(o,[t,e].concat(u)))}}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $t(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n=n||['a:not([data-focus="no-auto"])','button:not(:disabled):not([data-focus="no-auto"])','input:not(:disabled):not([type="hidden"]):not([data-focus="no-auto"])','select:not(:disabled):not([data-focus="no-auto"])','textarea:not(:disabled):not([data-focus="no-auto"])','[tabindex]:not([tabindex="-1"]):not(:disabled):not([data-focus="no-auto"])'].join(", ");var r,o=function(t){if(Array.isArray(t))return Jt(t)}(r=t.querySelectorAll(n))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return Jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return o.length?!0===e?o.pop():o.shift():null}function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Zt(t){return t==parseInt(t)?parseInt(t):t}function Qt(t,e,n){var r,o,i,a,u,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,f=t.split("."),p=[],d=n;for(r=0;r<f.length;r++)if(o=Zt(f[r]),p.push(o),i=Object.prototype.hasOwnProperty.call(d,o)?Vt(d[o]):"undefined",l||"object"!==i||b(d[o])||d[o]instanceof Array||(i="value"),a=(u=r+1===f.length)?null:Zt(f[r+1]),"undefined"!==i||u||(d[o]="number"==typeof a?[]:{},i="object"),u){if(!c&&"undefined"!==i&&null!==d[o])return s&&s.warn('strCreate : already defined "'+t+'" ['+i+"]"),n;d[o]=e}else if("object"===i)d=d[o];else{if(!c||u)return s&&s.warn('strCreate : partially defined "'+t+'" as "'+p.join(".")+'" ['+i+"]"),n;d[o]="number"==typeof a?[]:{},d=d[o]}return n}function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Xt(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if("object"!==Kt(e)||null===e)return r&&r.error("strAccess : invalid subject input : ",e),null;var o,i,a,u=t.split("."),c=[],l=e;for(o=0;o<u.length;o++){if(a=u[o],c.push(a),i=1===n||Object.prototype.hasOwnProperty.call(l,a)?Kt(l[a]):"undefined",null===l[a]&&(i="undefined"),"undefined"===i)return n?(r&&r.warn('strAccess : no exact match for "'+t+'" found "'+c.join(".")+'" ['+i+"]"),null):l;if(o===u.length-1)return l[a];if("object"!==i)return n?(r&&r.warn('strAccess : no exact match for "'+t+'" found "'+c.join(".")+'" ['+i+"]"),null):l;l=l[a]}}function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function ne(t,e){return t.get(oe(t,e))}function re(t,e,n){return t.set(oe(t,e),n),n}function oe(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ue(r.key),r)}}function ae(t,e,n){return e&&ie(t.prototype,e),n&&ie(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ue(t){var e=function(t,e){if("object"!=te(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==te(e)?e:e+""}function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e,n){return e=fe(e),function(t,e){if(e&&("object"===te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,se()?Reflect.construct(e,n||[],fe(t).constructor):e.apply(t,n))}function se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(se=function(){return!!t})()}function fe(t){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fe(t)}function pe(t,e){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pe(t,e)}var de=function(t){function e(){return ce(this,e),le(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pe(t,e)}(e,t),ae(e)}(y),he=new WeakMap,ye=new WeakMap,ve=function(){return ae((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(ce(this,t),ee(this,he,{}),ee(this,ye,{}),!b(e))throw new de("Argument defaults must be a plain Object");if(re(he,this,e),!(n instanceof Array))throw new de("Argument extended must be an Array");var r=this.constructor.extendInheritance(n);r&&this.constructor.merge(r,ne(he,this),!0),re(ye,this,this.constructor.clone(ne(he,this)))}),[{key:"defaults",get:function(){return this.constructor.clone(ne(he,this))}},{key:"data",get:function(){return this.constructor.clone(ne(ye,this))}},{key:"exposed",get:function(){return ne(ye,this)}},{key:"get",value:function(t){return Xt(t,ne(ye,this))}},{key:"set",value:function(t,e){Qt(t,e,ne(ye,this),!0)}},{key:"merge",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!b(t))throw new de("Argument data must be a plain Object");this.constructor.merge(t,ne(ye,this),e)}}],[{key:"clone",value:function(t){return g(t,!0)}},{key:"merge",value:function(t,e){Q(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],!0,!0)}},{key:"extendInheritance",value:function(t){if(!t.length)return null;for(var e=t.shift(),n=0;n<t.length;n++){if(!b(t[n]))throw new de("Argument extended must contain only plain Objects");this.merge(t[n],e,!0)}return e}}])}();function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function me(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function ge(t,e){return t.get(Oe(t,e))}function we(t,e,n){return t.set(Oe(t,e),n),n}function Oe(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xe(r.key),r)}}function _e(t,e,n){return e&&ke(t.prototype,e),n&&ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xe(t){var e=function(t,e){if("object"!=be(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==be(e)?e:e+""}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e,n){return e=Pe(e),function(t,e){if(e&&("object"===be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ee()?Reflect.construct(e,n||[],Pe(t).constructor):e.apply(t,n))}function Ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ee=function(){return!!t})()}function Pe(t){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(t)}function Te(t,e){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Te(t,e)}var Le=function(t){function e(){return je(this,e),Se(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Te(t,e)}(e,t),_e(e)}(y),Ae=new WeakMap,Ce=new WeakMap,Me=function(){return _e((function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;je(this,t),me(this,Ae,null),me(this,Ce,null),e=this,(n=xe(n="options"))in e?Object.defineProperty(e,n,{value:null,enumerable:!0,configurable:!0,writable:!0}):e[n]=null,we(Ae,this,i),we(Ce,this,o),this.options=r}),[{key:"debug",get:function(){return ge(Ae,this)}},{key:"context",get:function(){return ge(Ce,this)}},{key:"_context_check",value:function(t){if(t&&ge(Ce,this)&&t!==ge(Ce,this))throw new Le("Context mismatch")}}])}();function Be(t){return function(t){if(Array.isArray(t))return Ne(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function Ie(t,e,n){De(t,e),e.set(t,n)}function De(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fe(t,e){return t.get(ze(t,e))}function qe(t,e,n){return t.set(ze(t,e),n),n}function ze(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,He(r.key),r)}}function Ge(t,e,n){return e&&We(t.prototype,e),n&&We(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function He(t){var e=function(t,e){if("object"!=Re(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Re(e)?e:e+""}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ye(t,e,n){return e=$e(e),function(t,e){if(e&&("object"===Re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Je()?Reflect.construct(e,n||[],$e(t).constructor):e.apply(t,n))}function Je(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Je=function(){return!!t})()}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$e(t)}function Ve(t,e){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ve(t,e)}var Ze=function(t){function e(){return Ue(this,e),Ye(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}(e,t),Ge(e)}(y),Qe=new WeakMap,Ke=new WeakMap,Xe=new WeakMap,tn=new WeakSet,en=function(){return Ge((function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(Ue(this,t),De(this,e=tn),e.add(this),Ie(this,Qe,null),Ie(this,Ke,null),Ie(this,Xe,{}),function(t,e,n){(e=He(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"append",!0),r&&"object"!==Re(r))throw new Ze("Argument context must be null or an Object");qe(Qe,this,i),qe(Ke,this,r),this.append=o,this.load(n)}),[{key:"debug",get:function(){return Fe(Qe,this)}},{key:"context",get:function(){return Fe(Ke,this)}},{key:"load",value:function(t){if(!(t instanceof Array))throw new Ze("Argument plugins must be an Array");Fe(Qe,this)&&Fe(Qe,this).group(ze(tn,this,rn).call(this)+"load");for(var e=0;e<t.length;e++){var n=t[e];n instanceof Array||(n=[n]),this.init.apply(this,Be(n))}Fe(Qe,this)&&Fe(Qe,this).groupEnd()}},{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof t)throw new Ze("Argument Construct expected function but got: "+Re(t));var r=t.pluginName||t.name;if(!n&&Fe(Xe,this)[r])throw new Ze("Plugin already defined: "+r);try{Fe(Xe,this)[r]=new t(e,Fe(Ke,this),Fe(Qe,this))}catch(t){throw new Ze("Error initializing plugin: "+r,t)}return Fe(Qe,this)&&Fe(Qe,this).log(ze(tn,this,rn).call(this)+"init",r),Fe(Xe,this)[r]}},{key:"runAsync",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.run(t,e,n),o=Object.values(r),i=[],a=0;a<o.length;a++)"function"==typeof o[a].then&&i.push(o[a]);return i}},{key:"run",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Fe(Qe,this)&&Fe(Qe,this).group(ze(tn,this,rn).call(this)+"run",t);for(var r={},o=Object.keys(Fe(Xe,this)),i=0;i<o.length;i++)if(!n||!n.length||n.includes(o[i])){var a=this.exec(o[i],t,e);null!==a&&(r[o[i]]=a)}return Fe(Qe,this)&&!Object.keys(r).length&&Fe(Qe,this).log(ze(tn,this,rn).call(this)+"run No results:",t,e,n),Fe(Qe,this)&&Fe(Qe,this).groupEnd(),r}},{key:"exec",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Fe(Xe,this)[t]){if(r)return null;throw new Ze("Plugin not loaded: "+t)}n instanceof Array||(n=[n]),Fe(Ke,this)&&null!==this.append&&(this.append?n[n.length-1]!==Fe(Ke,this)&&n.push(Fe(Ke,this)):n[0]!==Fe(Ke,this)&&n.unshift(Fe(Ke,this)));var o=null;if(Fe(Xe,this)[t][e]){try{var i;o=(i=Fe(Xe,this)[t])[e].apply(i,Be(n))}catch(n){throw new Ze('Plugin method "'+e+'" failed to run: '+t,n)}Fe(Qe,this)&&Fe(Qe,this).log(ze(tn,this,rn).call(this)+"exec",t,e)}else Fe(Qe,this)&&Fe(Qe,this).log(ze(tn,this,rn).call(this)+"exec Unknown method",e,"on plugin",t);return o}},{key:"get",value:function(t){return Fe(Xe,this)[t]||null}},{key:"has",value:function(t){return!!Fe(Xe,this)[t]}},{key:"require",value:function(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++){if(!this.has(n[o]))throw new Ze("Failed with unmet plugin requirement: "+n[o]);t.push(this.get(n[o]))}return t}}])}();function nn(){var t="unknown",e=null;return Fe(Ke,this)&&(Fe(Ke,this).constructor&&Fe(Ke,this).constructor.name&&(t=Fe(Ke,this).constructor.name),Fe(Ke,this).type&&(t=Fe(Ke,this).type),Fe(Ke,this).name&&(t=Fe(Ke,this).name),Fe(Ke,this).dom&&Fe(Ke,this).dom.id&&(e=Fe(Ke,this).dom.id),Fe(Ke,this).id&&(e=Fe(Ke,this).id)),t+(e?"#"+e:"")}function rn(){return ze(tn,this,nn).call(this)+"->"+this.constructor.name+"::"}function on(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;1024!==n&&1e3!==n&&(n=1024);var i={bytes:t<=0?0:t,unit:"bytes"};if(i.value=i.bytes,i.bytes<=0)return r?i:"0 bytes";var a=1e3===n?["bytes","kb","mb","gb","tb","pb","eb","zb","yb"]:["bytes","kib","mib","gib","tib","pib","eib","zib","yib"],u="number"==typeof o?o:Math.floor(Math.log(i.bytes)/Math.log(n)),c=e<=0||"bytes"===a[u]?0:e;return i.value=(i.bytes/Math.pow(n,u)).toFixed(c),i.unit=a[u],r?i:i.value+" "+i.unit}function an(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e=Math.pow(10,e),Math.round(t*e)/e}function un(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,(function(t){return e[t]}))}function cn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!n)return null;var r="rgb",o=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)];return null!==e&&(r+="a",o.push(e>1?e/100:e)),"".concat(r,"(").concat(o.join(","),")")}function ln(t){return t.replace(/^[A-Z]/g,(function(t){return"-"+t.toLowerCase()})).replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}function sn(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((t=t.trim()).length){var n=document.createElement("template");if("content"in n)return n.innerHTML=t,e?n.content.childNodes:n.content.firstChild}return null}function fn(t){return t.charAt(0).toUpperCase()+t.slice(1)}function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function dn(t){if(void 0===t||!t)return!0;switch(pn(t)){case"string":return!t.length;case"object":return!(t instanceof Date||(t instanceof Array?t.length:b(t)?Object.keys(t).length:void 0===t.length||t.length))}return!1}function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function yn(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function vn(t,e){return t.get(mn(t,e))}function bn(t,e,n){return t.set(mn(t,e),n),n}function mn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,On(r.key),r)}}function wn(t,e,n){return e&&gn(t.prototype,e),n&&gn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function On(t){var e=function(t,e){if("object"!=hn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hn(e)?e:e+""}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _n(t,e,n){return e=jn(e),function(t,e){if(e&&("object"===hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xn()?Reflect.construct(e,n||[],jn(t).constructor):e.apply(t,n))}function xn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xn=function(){return!!t})()}function jn(t){return jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jn(t)}function Sn(t,e){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sn(t,e)}var En=function(t){function e(){return kn(this,e),_n(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sn(t,e)}(e,t),wn(e)}(y),Pn=new WeakMap,Tn=new WeakMap,Ln=new WeakMap,An=new WeakMap,Cn=new WeakMap,Mn=function(){return wn((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(kn(this,t),yn(this,Pn,null),yn(this,Tn,null),yn(this,Ln,{}),yn(this,An,null),yn(this,Cn,"data-state"),bn(Pn,this,e),null!==n&&!b(n))throw new En("Argument states must be null or a plain Object");null===n&&(n={initialized:{classOn:"initialized"}}),bn(Tn,this,n)}),[{key:"global",get:function(){return vn(An,this)}},{key:"exposed",get:function(){return vn(Tn,this)}},{key:"extend",value:function(t){Q(vn(Tn,this),t,!0,!0,!0,!1)}},{key:"is",value:function(t){return!!vn(Ln,this)[t]}},{key:"has",value:function(t){return!!vn(Tn,this)[t]}},{key:"get",value:function(t){var e=vn(Tn,this)[t];if(!e)throw new En("Unknown state: "+t);return e}},{key:"set",value:function(t){var e=this.get(t),n=!0===e||!1!==e.global,r=!1,o=null,i=vn(An,this);if(n){if(t===i)return;r=!0,o=t}if(!0!==e){if(e.unsets instanceof Array)for(var a=0;a<e.unsets.length;a++)this.unset(e.unsets[a]);e.classOn&&vn(Pn,this).dom.classList.add(e.classOn),e.classOff&&vn(Pn,this).dom.classList.remove(e.classOff)}n&&(vn(Pn,this).dom.setAttribute(vn(Cn,this),t),bn(An,this,t)),vn(Ln,this)[t]=!0,r?vn(Pn,this).dispatchEvent("state.changed",{from:i,to:o}):vn(Pn,this).dispatchEvent("state.set",{set:t})}},{key:"unset",value:function(t){if(vn(Ln,this)[t]){var e=this.get(t),n=!0===e||!1!==e.global;!0!==e&&(e.classOn&&vn(Pn,this).dom.classList.remove(e.classOn),e.classOff&&vn(Pn,this).dom.classList.add(e.classOff)),n&&(vn(Pn,this).dom.setAttribute(vn(Cn,this),"null"),bn(An,this,null)),vn(Ln,this)[t]=!1,vn(Pn,this).dispatchEvent("state.unset",{unset:t})}}}])}();function Bn(t){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(t)}function Nn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||In(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(t){return function(t){if(Array.isArray(t))return Dn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||In(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(t,e){if(t){if("string"==typeof t)return Dn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(t,e):void 0}}function Dn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fn(t,e,n){qn(t,e),e.set(t,n)}function qn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zn(t,e){return t.get(Gn(t,e))}function Wn(t,e,n){return t.set(Gn(t,e),n),n}function Gn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yn(r.key),r)}}function Un(t,e,n){return e&&Hn(t.prototype,e),n&&Hn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yn(t){var e=function(t,e){if("object"!=Bn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bn(e)?e:e+""}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $n(t,e,n){return e=Zn(e),function(t,e){if(e&&("object"===Bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vn()?Reflect.construct(e,n||[],Zn(t).constructor):e.apply(t,n))}function Vn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vn=function(){return!!t})()}function Zn(t){return Zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zn(t)}function Qn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kn(t,e)}function Kn(t,e){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kn(t,e)}var Xn=function(t){function e(){return Jn(this,e),$n(this,e,arguments)}return Qn(e,t),Un(e)}(y),tr=new WeakMap,er=new WeakMap,nr=new WeakMap,rr=new WeakMap,or=new WeakMap,ir=new WeakMap,ar=new WeakMap,ur=new WeakSet,cr=function(t){function e(t){var n,r,o,i,a,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,y=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];if(Jn(this,e),qn(a=i=$n(this,e,[t,d,h]),u=ur),u.add(a),Fn(i,tr,null),Fn(i,er,null),Fn(i,nr,null),Fn(i,rr,null),Fn(i,or,!1),Fn(i,ir,[]),Fn(i,ar,!1),h&&window.console.warn("UiComponent.constructor >",i.constructor.name,{element:t,settings:c,defaults:l,extend:s,states:f,plugins:p,parent:d,debug:h,init:y}),!(t instanceof HTMLElement))throw new Xn("Argument element must be a HTMLElement");Wn(tr,i,t),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.id||function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||"";do{t=e+mt(n)}while(document.getElementById(t));return t}(e,n);t.id=r}(t,i.constructor.name.toLowerCase()+"-",!0),Gn(ur,i,sr).call(i),s=s||[],Wn(rr,i,p?new en(p,i,!0,h):null),null===(n=zn(rr,i))||void 0===n||n.run("extendDefaultConfig",[s]),Wn(er,i,new ve(l||{eventPrefix:null},s)),Gn(ur,i,pr).call(i),Gn(ur,i,lr).call(i),null===(r=zn(rr,i))||void 0===r||r.run("applyConfig",[i.config]);var v=!1;return c&&!0===c.__forceExtend&&(v=!0,delete c.__forceExtend),b(c)&&i.config.merge(c,v),Wn(nr,i,new Mn(i,f||{})),null===(o=zn(rr,i))||void 0===o||o.run("extendAvailableStates",[zn(nr,i)]),y&&i.init(),i}return Qn(e,t),Un(e,[{key:"type",get:function(){return this.constructor.name}},{key:"dom",get:function(){return zn(tr,this)}},{key:"config",get:function(){return zn(er,this)}},{key:"states",get:function(){return zn(nr,this)}},{key:"plugins",get:function(){return zn(rr,this)}},{key:"children",get:function(){return Rn(zn(ir,this))}},{key:"init",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(zn(or,this))throw new Xn("Component already initialized");Wn(or,this,!0),null===(t=zn(rr,this))||void 0===t||t.run("initComponent"),zn(nr,this).set("initialized"),window.setTimeout((function(){e.dispatchEvent((e.config.get("eventPrefix")||"")+"initialized"),n&&n(e)}),1)}},{key:"_initChildren",value:function(){if(zn(ar,this))throw new Xn("Component children already initialized");Wn(ar,this,!0);var t=zn(er,this).get("children");if(t&&b(t)){var e=Object.entries(t);e.length&&this.debug&&this.debug.group(this.constructor.name+"::_initChildren",e);for(var n=0;n<e.length;n++){var r=Nn(e[n],2),o=r[0],i=r[1],a=i instanceof Array?i:[i];try{var u;Wn(ir,this,zn(ir,this).concat((u=Gn(ur,this,fr)).call.apply(u,[this].concat(Rn(a)))))}catch(t){throw new Xn("Failed to initialize child type: "+o,t)}}e.length&&this.debug&&this.debug.groupEnd(),this.dispatchEvent((this.config.get("eventPrefix")||"")+"children.initialized")}}},{key:"eachChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("function"==typeof t)e=t,t=null;else if("function"!=typeof e)throw new Xn("Argument callback must be a Function");for(var n=0,r=0;r<zn(ir,this).length;r++){var o=zn(ir,this)[r];if(!t||t===o.type||t instanceof Array&&t.includes(o.type)){if(!0===e(o,n,r))break;n++}}}},{key:"getConfigFromAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["id","class","type","state","config"];if(zn(tr,this).hasAttributes()){for(var e={},n=zn(tr,this).attributes,r=0;r<n.length;r++){var o=this.constructor.configDotNameFromAttr(n[r].name),i=this.constructor.configValueFromAttr(n[r].value);t.includes(o)||Qt(o,i,e,!0,!0,this.debug);var a=this.constructor.configCamelNameFromDot(o);t.includes(a)||Qt(a,i,e,!0,!0,this.debug)}return e}return null}},{key:"getDomRefs",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.get("dom."+t);if(!t||!t.length||!n)return e?[]:null;var r="querySelector"+(e?"All":"");return zn(tr,this)[r](n)}},{key:"requireDomRefs",value:function(t){for(var e=0;e<t.length;e++){var n=Nn(t[e],2),r=n[0],o=n[1],i=this.getDomRefs(r,o);if(!i||o&&!i.length)throw new Xn("Component requires a dom reference for: "+r)}}},{key:"event_state",value:function(t,e){if(!t||"string"!=typeof t.type||!t.type.length)throw new Xn("No valid event type available");var n=t.type;"string"!=typeof e&&(e=this.config.get("eventPrefix")),e&&e.length&&n.substring(0,e.length)===e&&(n=n.substring(e.length)),this.states.set(n)}}],[{key:"configValueFromAttr",value:function(t){if("string"==typeof t)if(t.length){if("true"===t.toLowerCase())t=!0;else if("false"===t.toLowerCase())t=!1;else if(/^[0-9]+$/.test(t))t=parseInt(t);else if(/^[0-9]*\.[0-9]+$/.test(t))t=parseFloat(t);else if("["===t[0]||"{"===t[0])try{t=JSON.parse(t)}catch(e){return t}}else t=!0;return t}},{key:"configDotNameFromAttr",value:function(t){return"data."===(t=t.replace(/-/g,".")).substr(0,5)&&(t=t.substr(5)),t}},{key:"configCamelNameFromDot",value:function(t){return t.toLowerCase().replace(/\.(.)/g,(function(t,e){return e.toUpperCase()}))}},{key:"make",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!(t instanceof HTMLElement))throw new Xn("Argument element must be a HTMLElement");if(i=i||this,null===o){var a=t.getAttribute("debug")||t.getAttribute("data-debug");!0===i.configValueFromAttr(a)&&(o=console)}else!0===o&&(o=console);return o&&window.console.warn("UiComponent.make",i.name,{element:t,settings:e,plugins:n,parent:r,debug:o,Construct:i}),new i(t,e,null,null,null,n,r,o,!0)}},{key:"makeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;i=i||this,o&&window.console.warn("UiComponent.makeAll",i.name,{settings:t,plugins:e,parent:n,context:r,debug:o,Construct:i});for(var a=[],u=r.querySelectorAll(i.selector),c=0;c<u.length;c++)a.push(i.make(u[c],t,e,n,o,i));return a}},{key:"selector",get:function(){return'[is="ui-component"]:not([data-state])'}}])}(W);function lr(){var t=function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.getAttribute(t);if("string"!=typeof o||!o.length)return null;try{n=JSON.parse(o)}catch(t){if(!r)throw t;return null}return n}("data-config",zn(tr,this));t&&(this.config.merge(t),this.debug&&this.debug.log(this.constructor.name+"::loadElementConfig",t))}function sr(){zn(tr,this).setAttribute("data-ui",this.constructor.name)}function fr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("function"!=typeof t)throw new Xn("Argument Construct must be a Function");return t.makeAll(e,n,this,zn(tr,this),this.debug,t)}function pr(){var t=this.getConfigFromAttributes();t&&(this.config.merge(t),this.debug&&this.debug.log(this.constructor.name+"::getConfigFromAttributes",t))}function dr(t){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dr(t)}function hr(t,e,n){return(e=mr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yr(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mr(r.key),r)}}function br(t,e,n){return e&&vr(t.prototype,e),n&&vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mr(t){var e=function(t,e){if("object"!=dr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dr(e)?e:e+""}function gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wr(t,e,n){return e=kr(e),function(t,e){if(e&&("object"===dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Or()?Reflect.construct(e,n||[],kr(t).constructor):e.apply(t,n))}function Or(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Or=function(){return!!t})()}function kr(t){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kr(t)}function _r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xr(t,e)}function xr(t,e){return xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xr(t,e)}var jr=function(t){function e(){return gr(this,e),wr(this,e,arguments)}return _r(e,t),br(e)}(y),Sr=new WeakMap,Er=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return gr(this,e),hr(t=wr(this,e,[n,r,o]),"extendConfig",null),hr(t,"extendStates",null),hr(t,"registerEvents",null),hr(t,"configOptions",!0),function(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}(t,Sr,!1),t}return _r(e,t),br(e,[{key:"extendDefaultConfig",value:function(t,e){if(this._context_check(e),this.extendConfig){if(!b(this.extendConfig))throw new jr("Config extension, must be a plain Object");if(!Object.keys(this.extendConfig).length)throw new jr("Config extension is empty");t.push(this.extendConfig)}}},{key:"extendAvailableStates",value:function(t,e){if(this._context_check(e),this.extendStates){if(!b(this.extendConfig))throw new jr("States extension, must be a plain Object");if(!Object.keys(this.extendConfig).length)throw new jr("States extension is empty");t.extend(this.extendStates)}}},{key:"applyConfig",value:function(t,e){if(this._context_check(e),this.configOptions)if(b(this.options)){var n={};n[this.constructor.pluginName||this.constructor.name]=this.options,t.merge(n)}else this.debug&&this.debug.error(this.constructor.name+"::applyConfig Invalid options type:",dr(this.options))}},{key:"initComponent",value:function(t){if(this,(e=Sr).get(yr(e,this)))throw new jr("Plugin already initialized: "+this.constructor.name);var e;if(function(t,e,n){t.set(yr(t,e),!0)}(Sr,this),this._context_check(t),this.registerEvents){if(!(this.registerEvents instanceof Array))throw new jr("Event register must be an Array");t.addEventList(this.registerEvents)}}}])}(Me);function Pr(t){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(t)}function Tr(t){return function(t){if(Array.isArray(t))return Lr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Lr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ar(t,e,n){return(e=Dr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Mr(t,e,n){return t.set(Nr(t,e),n),n}function Br(t,e){return t.get(Nr(t,e))}function Nr(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Rr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dr(r.key),r)}}function Ir(t,e,n){return e&&Rr(t.prototype,e),n&&Rr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dr(t){var e=function(t,e){if("object"!=Pr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pr(e)?e:e+""}function Fr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qr(t,e,n){return e=Wr(e),function(t,e){if(e&&("object"===Pr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zr()?Reflect.construct(e,n||[],Wr(t).constructor):e.apply(t,n))}function zr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zr=function(){return!!t})()}function Wr(t){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wr(t)}function Gr(t,e){return Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gr(t,e)}var Hr=function(t){function e(){return Fr(this,e),qr(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gr(t,e)}(e,t),Ir(e)}(y),Ur=new WeakMap,Yr=new WeakMap,Jr=function(){return Ir((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Fr(this,t),Cr(this,Ur,null),Cr(this,Yr,!0),Ar(this,"debug",null),Ar(this,"errorMessage",null),Ar(this,"_defaults",null),this.debug=n,e&&(this.data=e)}),[{key:"_render",value:function(t){throw this.debug&&this.debug.warn(this.constructor.name+"::_render",t),new Hr("Template requires a render method")}},{key:"_validate",value:function(t){throw this.debug&&this.debug.warn(this.constructor.name+"::_validate",t),new Hr("Template requires a validate method")}},{key:"extend",get:function(){return Br(Yr,this)},set:function(t){if("boolean"!=typeof t)throw new Hr("Extend must be a boolean value");Mr(Yr,this,t)}},{key:"data",get:function(){return Br(Ur,this)},set:function(t){if(!b(t))throw new Hr("Cannot set invalid template data, must be a plain object");Mr(Ur,this,t)}},{key:"_process_defaults",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(null==e?void 0:e.classes)||[];t.classes instanceof Array?r.push.apply(r,Tr(t.classes)):"string"==typeof t.classes&&r.push(t.classes);var o=(null==e?void 0:e.attributes)||[];return n&&t.id&&o.push('id="'.concat(t.id,'"')),t.attributes instanceof Array?o.push.apply(o,Tr(t.attributes)):"string"==typeof t.attributes&&o.push(t.attributes),{classes:r,attributes:o}}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!b(this._defaults))throw new Hr("Invalid template defaults data");if(t&&(this.data=t),!b(Br(Ur,this)))throw new Hr("Invalid template data, must be a plain object");var e={};return Q(e,this._defaults,!0,!0),Q(e,Br(Ur,this),Br(Yr,this),!0),this._validate(e),this.debug&&this.debug.log(this.constructor.name+"::render",e),this._render(e)}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=0;r<t.length;r++)n.push(this.render(t));return e?n:n.join("")}},{key:"node",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t instanceof Array?this.loop(t):this.render(t);return e?sn(e):[]}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof HTMLElement))throw new Hr("Requires a HTMLElement to append to");for(var n=this.node(e),r=0;r<n.length;r++)t.appendChild(n[r]);return n}},{key:"toString",value:function(){var t;try{t=this.render()}catch(e){this.debug&&this.debug.error(this.constructor.name+"::toString",e),t=this.errorMessage}return"string"!=typeof t&&(t="\x3c!-- render error: ".concat(this.constructor.name," with: ").concat(JSON.stringify(Br(Ur,this))," --\x3e")),t}}],[{key:"dom",value:function(t){var e=document.getElementById(t);if(!e)throw new Hr("Template not found: "+t);return e.innerHTML.trim()}}])}();function $r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Vr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zr(t){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zr(t)}function Qr(t,e,n){return(e=to(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,to(r.key),r)}}function Xr(t,e,n){return e&&Kr(t.prototype,e),n&&Kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function to(t){var e=function(t,e){if("object"!=Zr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zr(e)?e:e+""}function eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function no(t,e,n){return e=oo(e),function(t,e){if(e&&("object"===Zr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ro()?Reflect.construct(e,n||[],oo(t).constructor):e.apply(t,n))}function ro(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ro=function(){return!!t})()}function oo(t){return oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oo(t)}function io(t,e){return io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},io(t,e)}var ao=function(t){function e(){return eo(this,e),no(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&io(t,e)}(e,t),Xr(e)}(y),uo=function(){return Xr((function t(){eo(this,t)}),null,[{key:"isRenderData",value:function(t){return b(t)&&"string"==typeof t.template&&b(t.data)}},{key:"add",value:function(t,e){if("object"!==Zr(e))throw new ao("Must be a template object: "+t);if(this.tmpl[t])throw new ao("Template already defined: "+t);this.tmpl[t]=e}},{key:"require",value:function(t,e){try{this.add(t,e)}catch(t){if("object"!==Zr(e))throw t}}},{key:"get",value:function(t){if(this.tmpl&&this.tmpl[t])return this.tmpl[t];throw new ao("Unknown template: "+t)}},{key:"as",value:function(t,e){for(var n={},r=Object.entries(t),o=0;o<r.length;o++){var i=$r(r[o],2),a=i[0],u=i[1];Qt(a,this.recursive(u,e+"."+a),n,!0,!1,this.debug)}return n}},{key:"data",value:function(t,e){var n=this.get(t.template);if(this.debug&&this.debug.log(this.name+"::data template:",t.template,"["+e+"]"),b(t.as)){var r=this.as(t.as,e+".as");this.debug&&this.debug.log(this.name+"::data as:",r,"["+e+"]"),Q(t.data,r,!0,!0)}return n.render(t.data)}},{key:"recursive",value:function(t,e){var n=Zr(t);if("string"===n)return t;if("function"===n){var r;try{r=t(e)}catch(t){throw new ao("Failed to render custom callback ["+e+"]",t)}if("string"!=typeof r)throw new ao("A custom callback must always return a string ["+e+"]");return r}if(t instanceof Array){for(var o=[],i=0;i<t.length;i++)o.push(this.recursive(t[i],e+"[".concat(i,"]")));return o[0]===this.keepMarker?(o.shift(),o):o.join("")}if(this.isRenderData(t))return this.data(t,e);if(b(t)&&!0===t[this.keepMarker])return t;if("function"==typeof t.toString)return t.toString();throw this.debug&&this.debug.error(this.name+"::render",t),new ao("Unknown data type: "+Zr(t)+" ["+e+"]")}},{key:"render",value:function(t){this.debug&&this.debug.groupCollapsed(this.name+"::render");var e=this.recursive(t,"data");return this.debug&&this.debug.groupEnd(),e}},{key:"node",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.render(t);return e?sn(e):[]}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof HTMLElement))throw new UiTemplateException("Requires a HTMLElement to append to");for(var n=this.node(e),r=0;r<n.length;r++)t.appendChild(n[r]);return n}}])}();function co(t){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(t)}function lo(t){return function(t){if(Array.isArray(t))return so(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return so(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fo(t,e,n){po(t,e),e.set(t,n)}function po(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ho(t,e){return t.get(vo(t,e))}function yo(t,e,n){return t.set(vo(t,e),n),n}function vo(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,go(r.key),r)}}function mo(t,e,n){return e&&bo(t.prototype,e),n&&bo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function go(t){var e=function(t,e){if("object"!=co(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=co(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==co(e)?e:e+""}function wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oo(t,e,n){return e=_o(e),function(t,e){if(e&&("object"===co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ko()?Reflect.construct(e,n||[],_o(t).constructor):e.apply(t,n))}function ko(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ko=function(){return!!t})()}function _o(t){return _o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_o(t)}function xo(t,e){return xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xo(t,e)}Qr(uo,"debug",null),Qr(uo,"tmpl",{}),Qr(uo,"keepMarker","__keep__");var jo=function(t){function e(){return wo(this,e),Oo(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}(e,t),mo(e)}(y),So=new WeakMap,Eo=new WeakMap,Po=new WeakMap,To=new WeakMap,Lo=new WeakSet,Ao=function(){return mo((function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(wo(this,t),po(this,n=Lo),n.add(this),fo(this,So,null),fo(this,Eo,null),fo(this,Po,!1),fo(this,To,!0),yo(So,this,o),!(e instanceof HTMLElement))throw new jo("Argument form must be an instance of HTMLElement");yo(Eo,this,e),this.includeDisabled=r}),[{key:"debug",get:function(){return ho(So,this)}},{key:"form",get:function(){return ho(Eo,this)}},{key:"setAsDefault",get:function(){return ho(To,this)},set:function(t){yo(To,this,!!t)}},{key:"includeDisabled",get:function(){return ho(Po,this)},set:function(t){yo(Po,this,!!t)}},{key:"get",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input, select, textarea",n={},r=ho(Eo,this).querySelectorAll(e),o=0;o<r.length;o++){var i=r[o],a="get_"+i.tagName.toLowerCase()+"_value";if((ho(Po,this)||!ho(Po,this)&&!i.disabled)&&this[a]){var u=this[a](i);if(null!==u){var c=this.constructor.input_info(i.name,u);if(t)n[c.name]?n[c.name]instanceof Array&&c.value instanceof Array&&(n[c.name]=n[c.name].concat(c.value)):n[c.name]=c.value;else{var l=Xt(c.name,n,!0);null!==l?l instanceof Array&&c.value instanceof Array&&Qt(c.name,l.concat(c.value),n,!0):Qt(c.name,c.value,n)}}}}return n}},{key:"set",value:function(t){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=this.constructor.convert_from_flat(t)),vo(Lo,this,Co).call(this,t,[],null,!1,e)}},{key:"inputs",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={};return Qt(t,!0,n),vo(Lo,this,Co).call(this,n,[],null,!0,e)||[]}},{key:"fieldname",value:function(t){if(!t||"string"!=typeof t.name||!t.name.length)throw new jo("Argument input must be a HTMLElement with a name property");var e=t.name;if((e=e.replace(/\[/g,".").replace(/]/g,"")).includes("..")){if(t.hasAttribute("data-fieldname")&&(e=t.getAttribute("data-fieldname"))&&e.length)return e;throw new jo("Complex fields require a data-fieldname attribute")}if("."===e[e.length-1]){e=e.substr(0,e.length-1);for(var n='[name^="'+t.name.substr(0,t.name.length-2)+'"]',r=ho(Eo,this).querySelectorAll(n),o=0;o<r.length;o++)if(r[o]===t){e+="."+o;break}}return e}},{key:"get_input_value",value:function(t){if(ho(Po,this)||!t.disabled){var e=t.value;switch(t.type){case"checkbox":case"radio":return"string"==typeof e&&"on"!==e.toLowerCase()&&(e.length||t.hasAttribute("value"))||(e=!0),t.checked?e:null;case"file":return t.files&&t.files.length?t.multiple?t.files:t.files[0]:null;case"number":return"".concat(e).length?parseFloat(e):null;default:return e}}return null}},{key:"get_select_value",value:function(t){if(ho(Po,this)||!t.disabled){for(var e=[],n=0;n<t.options.length;n++){var r=t.options[n];!ho(Po,this)&&r.disabled||r.selected&&e.push(r.hasAttribute("value")?r.value:r.innerText)}return t.multiple?e:e.shift()}return null}},{key:"get_textarea_value",value:function(t){return ho(Po,this)||!t.disabled?t.value:null}}],[{key:"input_info",value:function(t,e){return"."===(t=t.replace(/\[/g,".").replace(/]/g,""))[t.length-1]&&(t=t.substr(0,t.length-1),e instanceof Array||(e=[e])),{name:t,value:e}}},{key:"convert_from_flat",value:function(t){for(var e={},n=Object.keys(t),r=0;r<n.length;r++)Qt(n[r],t[n[r]],e);return e}}])}();function Co(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(void 0===t)return null;if(t instanceof Array){var i=ho(Eo,this).querySelectorAll('[name="'+n+'[]"]');if(i&&i.length){if(r){for(var a=[],u=0;u<i.length;u++)!0===t[u]&&a.push(i[u]);return a}vo(Lo,this,Mo).call(this,i,t)}else if((i=ho(Eo,this).querySelectorAll('[name="'+n+'"]'))&&1===i.length){if(r)return i;vo(Lo,this,Mo).call(this,i,t)}else{for(var c=[],l=0;l<t.length;l++){var s=n+"["+l+"]",f=vo(Lo,this,Co).call(this,t[l],[].concat(lo(e),[l]),s,r,o);f&&f.length&&(c=c.concat(Array.prototype.slice.call(f)))}if(r)return c}}else if(b(t)){for(var p=[],d=Object.keys(t),h=0;h<d.length;h++){var y;y=null===n?d[h]:n+"["+d[h]+"]";var v=vo(Lo,this,Co).call(this,t[d[h]],[].concat(lo(e),[d[h]]),y,r,o);v&&v.length&&(p=p.concat(Array.prototype.slice.call(v)))}if(r)return p}else{var m=ho(Eo,this).querySelectorAll('[name="'+n+'"]');if(m.length){if(r)return m;vo(Lo,this,Mo).call(this,m,t)}else{if(o)throw new jo("Undefined field: "+n);ho(So,this)&&ho(So,this).error(this.constructor.name+"::set_recursive Undefined field: "+n)}}return null}function Mo(t,e){if(e instanceof Array&&1===t.length&&"select"===t[0].tagName.toLowerCase()){for(var n=0;n<t[0].options.length;n++){var r=e.includes(t[0].options[n].value);t[0].options[n].selected=r,ho(To,this)&&t[0].options[n][r?"setAttribute":"removeAttribute"]("selected","")}ho(So,this)&&ho(So,this).log(this.constructor.name+"::set_inputs_values > select.array.value",t[0],e)}else for(var o=0;o<t.length;o++)e instanceof Array?void 0!==e[o]&&("radio"===t[o].type||"checkbox"===t[o].type?vo(Lo,this,No).call(this,t,e,o):(ho(To,this)?"textarea"===t[o].type?t[o].innerText=e:t[o].setAttribute("value",e):t[o].value=e,ho(So,this)&&ho(So,this).log(this.constructor.name+"::set_inputs_values > array.value",t[o],e))):"radio"===t[o].type||"checkbox"===t[o].type?vo(Lo,this,No).call(this,t,e,o,!0):"select"===t[o].tagName.toLowerCase()?vo(Lo,this,Bo).call(this,t,e,o):"file"===t[o].type?ho(So,this)&&ho(So,this).warn(this.constructor.name+"::set_inputs_values > file not settable",t[o],e):null!==e?(t[o].value=e,ho(To,this)&&("textarea"===t[o].type?t[o].innerHTML=e:t[o].setAttribute("value",e)),ho(So,this)&&ho(So,this).log(this.constructor.name+"::set_inputs_values > value",t[o],e)):ho(So,this)&&ho(So,this).warn(this.constructor.name+"::set_inputs_values > null",t[o],e)}function Bo(t,e,n){for(var r=0;r<t[n].options.length;r++){var o=e===t[n].options[r].value;t[n].options[r].selected=o,ho(To,this)&&t[n].options[r][o?"setAttribute":"removeAttribute"]("selected","")}ho(So,this)&&ho(So,this).log(this.constructor.name+"::set_select_single_value > select.value",t[n],e)}function No(t,e,n){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){var r=[];r[n]=e,e=r}if(t[n].hasAttribute("value")){var o=!1;t[n].value===e[n]||!0===e[n]||e[n]&&e[n].toLowerCase&&"on"===e[n].toLowerCase()?(ho(To,this)&&t[n].setAttribute("checked",""),t[n].checked=!0,o=!0):null!==e[n]&&!1!==e[n]||(ho(To,this)&&t[n].removeAttribute("checked"),t[n].checked=!1,o=!0),o&&ho(So,this)&&ho(So,this).log(this.constructor.name+"::set_radio_checkbox_value > value",t[n],t[n].checked)}else{var i=!1;!0===e[n]||e[n]&&e[n].toLowerCase&&"on"===e[n].toLowerCase()?(ho(To,this)&&t[n].setAttribute("checked",""),t[n].checked=!0,i=!0):null!==e[n]&&!1!==e[n]||(ho(To,this)&&t[n].removeAttribute("checked"),t[n].checked=!1,i=!0),i&&ho(So,this)&&ho(So,this).log(this.constructor.name+"::set_radio_checkbox_value",t[n],t[n].checked)}}function Ro(t){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ro(t)}function Io(t){return function(t){if(Array.isArray(t))return Do(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Do(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Do(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zo(r.key),r)}}function qo(t,e,n){return e&&Fo(t.prototype,e),n&&Fo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zo(t){var e=function(t,e){if("object"!=Ro(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ro(e)?e:e+""}function Wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Go(t,e,n){return e=Uo(e),function(t,e){if(e&&("object"===Ro(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ho()?Reflect.construct(e,n||[],Uo(t).constructor):e.apply(t,n))}function Ho(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ho=function(){return!!t})()}function Uo(t){return Uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uo(t)}function Yo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jo(t,e)}function Jo(t,e){return Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jo(t,e)}var $o=function(t){function e(){return Wo(this,e),Go(this,e,arguments)}return Yo(e,t),qo(e)}(y),Vo=function(t){function e(){var t,n,r,o;Wo(this,e);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=t=Go(this,e,[].concat(a)),o={legend:null,contentBefore:null,content:null,contentAfter:null,required:null,classes:[],attributes:[],wrapper:["ui-wrap","ui-wrap--fieldset"],rows:[],row_classes:["ui-wrap","ui-wrap--fieldset-row"]},(r=zo(r="_defaults"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return Yo(e,t),qo(e,[{key:"_validate",value:function(t){var e="string"==typeof t.contentBefore&&t.contentBefore.length,n="string"==typeof t.content&&t.content.length,r="string"==typeof t.contentAfter&&t.contentAfter.length,o=!!t.rows.length;if(!(e||n||r||o))throw new $o("Requires content, before/after or rows")}},{key:"_render",value:function(t){var e,n,r,o=["ui-fieldset"];t.legend&&o.push("ui-fieldset--legend"),t.classes instanceof Array&&o.push.apply(o,Io(t.classes));var i=[];t.wrapper instanceof Array&&i.push.apply(i,Io(t.wrapper));var a=[];t.attributes instanceof Array&&a.push.apply(a,Io(t.attributes));var u=t.required;u&&(u='<div class="ui-fieldset__required"><p><em>'.concat(u,"</em></p></div>"));var c="div",l=[];if(t.rows.length){c="ul";var s=["ui-fieldset__row"];t.row_classes instanceof Array&&s.push.apply(s,Io(t.row_classes));for(var f=0;f<t.rows.length;f++)l.push('<li class="'.concat(s.join(" "),'">').concat(t.rows[f],"</li>"))}return'<fieldset class="'.concat(o.join(" "),'" ').concat(a.join(" "),">")+(t.legend?'<legend class="ui-fieldset__legend"><strong>'.concat(t.legend,"</strong></legend>"):"")+'<div class="ui-fieldset__content">'+"<".concat(c,' class="').concat(i.join(" "),'">')+(null!==(e=t.contentBefore)&&void 0!==e?e:"")+(null!==(n=t.content)&&void 0!==n?n:"")+(l.length?l.join(""):"")+(null!==(r=t.contentAfter)&&void 0!==r?r:"")+(u||"")+"</".concat(c,">")+"</div></fieldset>"}}])}(Jr);function Zo(t){return Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zo(t)}function Qo(t){return function(t){if(Array.isArray(t))return Ko(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ko(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ko(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ei(r.key),r)}}function ti(t,e,n){return e&&Xo(t.prototype,e),n&&Xo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ei(t){var e=function(t,e){if("object"!=Zo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Zo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zo(e)?e:e+""}function ni(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ri(t,e,n){return e=ii(e),function(t,e){if(e&&("object"===Zo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oi()?Reflect.construct(e,n||[],ii(t).constructor):e.apply(t,n))}function oi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oi=function(){return!!t})()}function ii(t){return ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ii(t)}function ai(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ui(t,e)}function ui(t,e){return ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ui(t,e)}var ci=function(t){function e(){return ni(this,e),ri(this,e,arguments)}return ai(e,t),ti(e)}(y),li=function(t){function e(){var t,n,r,o;ni(this,e);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=t=ri(this,e,[].concat(a)),o={id:null,url:"",method:"post",files:!1,content:null,classes:[],attributes:[],wrapper:[]},(r=ei(r="_defaults"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return ai(e,t),ti(e,[{key:"_validate",value:function(t){if("string"!=typeof t.content||!t.content.length)throw new ci("Requires content")}},{key:"_render",value:function(t){var e=["ui-form"];t.classes instanceof Array&&e.push.apply(e,Qo(t.classes));var n=["ui-wrap","ui-wrap--form"];t.wrapper instanceof Array&&n.push.apply(n,Qo(t.wrapper));var r=['action="'.concat(t.url,'"'),'method="'.concat(t.method,'"')];return t.id&&r.push('id="'.concat(t.id,'"')),t.files&&r.push('enctype="multipart/form-data"'),t.attributes instanceof Array&&r.push.apply(r,Qo(t.attributes)),'<form is="ui-form" class="'.concat(e.join(" "),'" ').concat(r.join(" "),">")+'<div class="'.concat(n.join(" "),'">').concat(t.content,"</div>")+"</form>"}}])}(Jr);function si(t){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(t)}function fi(t){return function(t){if(Array.isArray(t))return pi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return pi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pi(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yi(r.key),r)}}function hi(t,e,n){return e&&di(t.prototype,e),n&&di(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yi(t){var e=function(t,e){if("object"!=si(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==si(e)?e:e+""}function vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bi(t,e,n){return e=gi(e),function(t,e){if(e&&("object"===si(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mi()?Reflect.construct(e,n||[],gi(t).constructor):e.apply(t,n))}function mi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mi=function(){return!!t})()}function gi(t){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gi(t)}function wi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oi(t,e)}function Oi(t,e){return Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oi(t,e)}var ki=function(t){function e(){return vi(this,e),bi(this,e,arguments)}return wi(e,t),hi(e)}(y),_i=function(t){function e(){var t,n,r,o;vi(this,e);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=t=bi(this,e,[].concat(a)),o={id:null,name:null,type:"text",value:null,checked:!1,required:!1,maxlen:null,min:null,max:null,step:null,width:null,classes:[],attr:[],attributes:[],autocomplete:null,label:{tag:"strong",before:!0,text:null},before:null,after:null,prefix:null,suffix:null,error:{tag:"em"},options:null,pseudo:"",icon:null},(r=yi(r="_defaults"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return wi(e,t),hi(e,[{key:"_validate",value:function(t){if("string"!=typeof t.name||!t.name.length)throw new ki("Requires a valid name");if("string"!=typeof t.type||!t.type.length)throw new ki("Requires a valid type")}},{key:"_render",value:function(t){var e=["ui-input"];["date","datetime","email","number","select","text"].includes(t.type)&&e.push("ui-input--default"),e.push("ui-input--".concat(t.type)),"checkbox"===t.type&&null===t.icon&&(t.icon="check"),t.required&&e.push("ui-input--required"),t.width&&e.push("ui-input--".concat(t.width)),t.classes instanceof Array&&e.push.apply(e,fi(t.classes));var n=[];t.attr instanceof Array&&n.push.apply(n,fi(t.attr));var r=[];t.id&&r.push('id="'.concat(t.id,'"')),["checkbox","radio"].includes(t.type)&&t.checked&&r.push("checked"),t.required&&r.push("required"),"number"==typeof t.maxlen&&r.push('maxlength="'.concat(t.maxlen,'"')),"number"==typeof t.min&&r.push('min="'.concat(t.min,'"')),"number"==typeof t.max&&r.push('max="'.concat(t.max,'"')),t.step&&r.push('step="'.concat(t.step,'"')),null===t.value||"boolean"==typeof t.value||["textarea","select"].includes(t.type)||r.push('value="'.concat(t.value,'"')),t.attributes instanceof Array&&r.push.apply(r,fi(t.attributes)),!t.icon||t.pseudo&&t.pseudo.length||(t.pseudo='<span class="ui-icon" data-icon="'.concat(t.icon,'"><span></span><span></span></span>'));var o="";if(t.autocomplete instanceof Array&&t.autocomplete.length){r.push('list="'.concat(t.id,'_autocomplete"')),r.push('autocomplete="off"'),o+='<datalist id="'.concat(t.id,'_autocomplete">');for(var i=0;i<t.autocomplete.length;i++)o+="<option>"+t.autocomplete[i]+"</option>";o+="</datalist>"}var a=t.label.text&&t.label.text.length?"<".concat(t.label.tag,' class="ui-input__label">').concat(t.label.text,"</").concat(t.label.tag,">"):"",u=t.error.tag&&t.error.tag.length?"<".concat(t.error.tag,' class="ui-input__error"></').concat(t.error.tag,">"):"";!t.before&&t.prefix&&(t.before='<span class="ui-input__prefix">'.concat(t.prefix,"</span>")),!t.after&&t.suffix&&(t.after='<span class="ui-input__suffix">'.concat(t.suffix,"</span>"));var c='<input type="'.concat(t.type,'" name="').concat(t.name,'" ').concat(r.join(" ")," />");switch(t.type){case"textarea":c='<textarea name="'.concat(t.name,'" ').concat(r.join(" "),">").concat(null===t.value?"":t.value,"</textarea>");break;case"select":if(c='<select name="'.concat(t.name,'" ').concat(r.join(" "),">"),"string"==typeof t.options)c+=t.options;else for(var l=0;l<t.options.length;l++){var s=t.options[l];b(s)||(s={value:s,label:fn(s)}),t.value===s.value&&(s.attributes||(s.attributes=""),s.attributes+=" selected"),c+='<option value="'.concat(null===s.value?"":s.value,'" ').concat(s.attributes||"",">").concat(s.label,"</option>")}c+="</select>",c+='<span class="ui-input__pseudo">'.concat(t.pseudo,"</span>");break;case"checkbox":case"radio":c+='<span class="ui-input__pseudo">'.concat(t.pseudo,"</span>")}return'<label class="'.concat(e.join(" "),'" ').concat(n.join(" "),">")+(t.label.before?a:"")+'<span class="ui-input__input">'+(t.before||"")+c+(t.after||"")+"</span>"+(t.label.before?"":a)+u+o+"</label>"}}])}(Jr);function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function ji(){return ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ri(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ji.apply(this,arguments)}function Si(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ei(t,e){return t.get(Ti(t,e))}function Pi(t,e,n){return t.set(Ti(t,e),n),n}function Ti(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ci(r.key),r)}}function Ai(t,e,n){return e&&Li(t.prototype,e),n&&Li(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ci(t){var e=function(t,e){if("object"!=xi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=xi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xi(e)?e:e+""}function Mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bi(t,e,n){return e=Ri(e),function(t,e){if(e&&("object"===xi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ni()?Reflect.construct(e,n||[],Ri(t).constructor):e.apply(t,n))}function Ni(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ni=function(){return!!t})()}function Ri(t){return Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ri(t)}function Ii(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Di(t,e)}function Di(t,e){return Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Di(t,e)}var Fi=function(t){function e(){return Mi(this,e),Bi(this,e,arguments)}return Ii(e,t),Ai(e)}(y),qi=new WeakMap,zi=new WeakSet,Wi=function(t){function e(t){var n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,p=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return Mi(this,e),Si(r=n=Bi(this,e,[t,i,a=a||{eventPrefix:"modal.",context:document.documentElement,openInContextClass:"ui-modal-context--active",mode:"modal",availableModes:["modal"],modeClass:"ui-modal--",restrictFocus:!0,focusOnShown:!0,focusLast:!1,focusResetOnHidden:!0,easyHide:!0,animator:{show:null,hide:null,speed:null,vis:!0},dom:{native:"dialog",dialog:".ui-modal__dialog",focusable:null,title:".ui-modal__dialog-title",content:".ui-modal__dialog-content",close:'[data-modal="ctrl:close"]'}},u,c=c||{initialized:{classOn:"ui-modal--initialized"},closed:{classOn:"ui-modal--closed",unsets:["open"]},open:{classOn:"ui-modal--open",unsets:["closed"]},animating:{global:!1,classOn:"ui-modal--animating"}},l,s,f,p]),o=zi),o.add(r),function(t,e,n){Si(t,e),e.set(t,null)}(n,qi),n}return Ii(e,t),Ai(e,[{key:"init",value:function(){var t=this;if(!W.isCompat(this.config.get("context")))throw new Fi("Option context must be an EventTarget compatible object");var n=this.getDomRefs("native",!1);n||(this.dom.setAttribute("role","dialog"),this.dom.setAttribute("aria-modal","true")),function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=null;document.addEventListener("keyup",(function(i){if((9===i.keyCode||"Tab"===i.key)&&function(t){return"function"==typeof t?!!t():!!t}(e))if(t.contains(document.activeElement))o=document.activeElement;else{var a;if(i.preventDefault(),n){var u=$t(t,!1,r),c=$t(t,!0,r);a=o===u?c:u}else a=$t(t,i.shiftKey,r);a&&a.focus()}}))}(this.dom,(function(){return t.open&&t.config.get("restrictFocus")}),!0,this.config.get("dom.focusable")),this.bind(),this.config.get("animator.vis")&&(this.dom.style.display="none"),n&&n.removeAttribute("open"),(n||this.dom).setAttribute("aria-hidden","true"),this.states.set("closed");var r=this.config.get("openInContextClass");r&&this.config.get("context").classList.remove(r),ji(Ri(e.prototype),"init",this).call(this,(function(){t.dom.classList.add(t.config.get("modeClass")+t.mode),t.dom.setAttribute("data-mode",t.mode)}))}},{key:"bind",value:function(){var t=this;this.addEventList([["click",function(){t._modeOptionActive("easyHide")&&t.hide()}],["modal.shown",function(){Ti(zi,t,Gi).call(t)}]]),this.dialog.addEventListener("click",(function(e){t._modeOptionActive("easyHide")&&e.stopPropagation()})),document.addEventListener("keyup",(function(e){27!==e.keyCode&&"Escape"!==e.key||!t.open||t._modeOptionActive("easyHide")&&t.hide()})),Ft(this.getDomRefs("close"),[["click",function(e){e.preventDefault(),t.hide()}]])}},{key:"_modeOptionActive",value:function(t){var e=this.config.get(t);if(!0===e)return!0;if(e instanceof Array){if(e.includes("!"+this.mode))return!1;if(e.includes(this.mode))return!0;if(e.includes("all!"))return!0}return!1}},{key:"mode",get:function(){return this.config.get("mode")},set:function(t){var e=this.config.get("availableModes");if(!t||!e.includes(t))throw new Fi('Unknown mode "'+mode+'"');this.mode!==t&&(this.dom.classList.remove(this.config.get("modeClass")+this.mode),this.config.set("mode",t),this.dom.classList.add(this.config.get("modeClass")+t),this.dom.setAttribute("data-mode",t))}},{key:"open",get:function(){return"open"===this.states.global},set:function(t){if("boolean"!=typeof t)throw new Fi(this.constructor.name+".open must be of type boolean");this.open!==t&&(this.open?this.hide():this.show())}},{key:"animating",get:function(){return this.states.is("animating")}},{key:"dialog",get:function(){return this.getDomRefs("dialog",!1)}},{key:"title",get:function(){return this.getDomRefs("title",!1)}},{key:"content",get:function(){return this.getDomRefs("content",!1)}},{key:"show",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.open&&!this.states.is("animating")){if(Pi(qi,this,e instanceof HTMLElement?e:document.activeElement||null),this.states.set("animating"),n&&!this.dispatchEvent((this.config.get("eventPrefix")||"")+"show",null,!0,!0))return void this.states.unset("animating");var r=this.config.get("animator.show");"function"!=typeof r&&(r=function(e){Ti(zi,t,Hi).call(t,e)}),this.config.get("animator.vis")&&(this.dom.style.display=""),i((function(){var e=t.getDomRefs("native",!1);e&&e.setAttribute("open",""),(e||t.dom).setAttribute("aria-hidden","false"),t.states.set("open");var o=t.config.get("openInContextClass");o&&t.config.get("context").classList.add(o),r((function(){t.states.unset("animating"),n&&t.dispatchEvent((t.config.get("eventPrefix")||"")+"shown")}),t)}))}}},{key:"hide",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.open&&!this.states.is("animating")){if(this.states.set("animating"),e&&!this.dispatchEvent((this.config.get("eventPrefix")||"")+"hide",null,!0,!0))return void this.states.unset("animating");var n=this.config.get("animator.hide");"function"!=typeof n&&(n=function(e){Ti(zi,t,Hi).call(t,e)});var r=this.getDomRefs("native",!1);r&&r.removeAttribute("open"),(r||this.dom).setAttribute("aria-hidden","true"),this.states.set("closed");var o=this.config.get("openInContextClass");o&&this.config.get("context").classList.remove(o),n((function(){t.states.unset("animating"),t.config.get("animator.vis")&&(t.dom.style.display="none"),Ei(qi,t)&&t.config.get("focusResetOnHidden")&&Ei(qi,t).focus(),e&&t.dispatchEvent((t.config.get("eventPrefix")||"")+"hidden"),Pi(qi,t,null)}),this)}}}],[{key:"bindOpeners",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'[data-modal="ctrl:open"]',r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!(t instanceof Array))throw new Fi("Argument modals must be an Array of UiModalComponent instances");if("function"!=typeof e.querySelectorAll)throw new Fi("Argument context must supply a querySelectorAll method");var o=e.querySelectorAll(n);if(!(o instanceof NodeList||o instanceof Array))throw new Fi("Argument context.querySelectorAll must return a NodeList or Array");var i=function(t){for(var e=["data-modal-id","aria-controls","href","value"],n=0;n<e.length;n++)if(t.hasAttribute(e[n])){var r=t.getAttribute(e[n]);if(r)return K(r,"#")}return null};"function"!=typeof r&&(r=i);for(var a=function(){var e=o[u];e.addEventListener("click",(function(n){n.preventDefault();var o=r(e,i);if("string"!=typeof o||!o.length)throw new Fi("Failed to get target modal id on opener");for(var a=0;a<t.length;a++)if(t[a].dom.id===o)return void(t[a].open=!0);throw new Fi("Modal opener could not find the target modal for: "+o)}))},u=0;u<o.length;u++)a()}},{key:"selector",get:function(){return'[is="ui-modal"]:not([data-state])'}}])}(cr);function Gi(){if(this._modeOptionActive("focusOnShown")){var t=$t(this.dom,this._modeOptionActive("focusLast"),this.config.get("dom.focusable"));t&&t.focus()}}function Hi(t){var e=this.config.get("animator.speed");e="number"==typeof e?e:300;var n=void 0!==this.dom.style.transition;n&&e&&this.dom.addEventListener("transitionend",t,{once:!0}),n&&e||window.setTimeout(t,e+1)}function Ui(t){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(t)}function Yi(t){return function(t){if(Array.isArray(t))return Ji(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ji(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ji(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ji(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $i(t,e,n){return(e=Qi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qi(r.key),r)}}function Zi(t,e,n){return e&&Vi(t.prototype,e),n&&Vi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qi(t){var e=function(t,e){if("object"!=Ui(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ui(e)?e:e+""}function Ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xi(t,e,n){return e=ea(e),function(t,e){if(e&&("object"===Ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ta()?Reflect.construct(e,n||[],ea(t).constructor):e.apply(t,n))}function ta(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ta=function(){return!!t})()}function ea(t){return ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ea(t)}function na(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ra(t,e)}function ra(t,e){return ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ra(t,e)}var oa=function(t){function e(){return Ki(this,e),Xi(this,e,arguments)}return na(e,t),Zi(e)}(y),ia=function(t){function e(){var t;Ki(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return $i(t=Xi(this,e,[].concat(r)),"_defaults",{id:null,classes:[],attributes:[],mode:"modal",header:{title:null,custom:null,controls:{before:null,custom:null,after:null}},focusable:!0,content:null,footer:{custom:null,controls:{before:null,custom:null,after:null}},icons:{closetop:"close",close:"close-small",ok:"check",cancel:"close-small",confirm:"check"},i18n:{closetop:"Close",close:"Close",ok:"Ok",cancel:"Cancel",confirm:"Confirm"},buttons:{closetop:"ui-button ui-button--icon ui-button--label-hidden ui-button--close",close:"ui-button ui-button--icon ui-button--close",ok:"ui-button ui-button--icon ui-button--accept",cancel:"ui-button ui-button--icon ui-button--cancel",confirm:"ui-button ui-button--icon ui-button--confirm"}}),t}return na(e,t),Zi(e,[{key:"_validate",value:function(t){var e="string"==typeof t.content,n="function"==typeof t.content.toString;if(!e&&!n)throw new oa("Requires content")}},{key:"_render",value:function(t){var e="modal";t.mode&&this.constructor.availableModes.includes(t.mode)&&(e=t.mode);var n=["ui-modal"];t.classes instanceof Array&&n.push.apply(n,Yi(t.classes));var r=['data-mode="'.concat(e,'"')];return t.id&&r.push('id="'.concat(t.id,'"')),t.attributes instanceof Array?r.push.apply(r,Yi(t.attributes)):"string"==typeof t.attributes&&r.push(t.attributes),'<section is="ui-modal" class="'.concat(n.join(" "),'" ').concat(r.join(" "),">")+'<div class="ui-modal__wrap"><dialog class="ui-modal__dialog">'+(t.header?'<div class="ui-modal__dialog-header">'+(t.header.title?'<h3 class="ui-modal__dialog-title">'.concat(t.header.title,"</h3>"):"")+(t.header.custom?t.header.custom:"")+(t.header.controls?'<div class="ui-modal__dialog-controls">'+(t.header.controls.before?t.header.controls.before:"")+(t.header.controls.custom?t.header.controls.custom:'<button class="ui-modal__button ui-modal__button--close '.concat(t.buttons.closetop,'" type="button" data-modal="ctrl:close">')+'<span class="ui-modal__icon ui-icon" data-icon="'.concat(t.icons.closetop,'"><span></span></span>')+'<span class="ui-modal__label ui-button__label">'.concat(t.i18n.closetop,"</span></button>"))+(t.header.controls.after?t.header.controls.after:"")+"</div>":"")+"</div>":"")+'<div class="ui-modal__dialog-scrollable"'.concat(t.focusable?' tabindex="0"':"",">")+'<div class="ui-modal__dialog-content">'.concat(t.content,"</div>")+"</div>"+(t.footer?'<div class="ui-modal__dialog-footer">'+(t.footer.custom?t.footer.custom:"")+(t.footer.controls?'<div class="ui-modal__dialog-controls">'+(t.footer.controls.before?t.footer.controls.before:"")+(t.footer.controls.custom?t.footer.controls.custom:"modal"===e?'<button class="ui-modal__button ui-modal__button--close '.concat(t.buttons.close,'" type="button" data-modal="ctrl:close">')+'<span class="ui-modal__icon ui-icon" data-icon="'.concat(t.icons.close,'"><span></span></span>')+'<span class="ui-modal__label ui-button__label">'.concat(t.i18n.close,"</span></button>"):"alert"===e?'<button class="ui-modal__button ui-modal__button--ok '.concat(t.buttons.ok,'" type="button" data-modal="ctrl:close">')+'<span class="ui-modal__icon ui-icon" data-icon="'.concat(t.icons.ok,'"><span></span></span>')+'<span class="ui-modal__label ui-button__label">'.concat(t.i18n.ok,"</span></button>"):"confirm"===e||"prompt"===e?'<button class="ui-modal__button ui-modal__button--cancel '.concat(t.buttons.cancel,'" type="button" data-modal="ctrl:close">')+'<span class="ui-modal__icon ui-icon" data-icon="'.concat(t.icons.cancel,'"><span></span></span>')+'<span class="ui-modal__label ui-button__label">'.concat(t.i18n.cancel,"</span></button>")+'<button class="ui-modal__button ui-modal__button--confirm '.concat(t.buttons.confirm,'" type="button" data-modal="ctrl:').concat(e,'.confirm">')+'<span class="ui-modal__icon ui-icon" data-icon="'.concat(t.icons.confirm,'"><span></span></span>')+'<span class="ui-modal__label ui-button__label">'.concat(t.i18n.confirm,"</span></button>"):"")+(t.footer.controls.after?t.footer.controls.after:"")+"</div>":"")+"</div>":"")+"</dialog></div></section>"}}])}(Jr);function aa(t){return aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aa(t)}function ua(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ca(r.key),r)}}function ca(t){var e=function(t,e){if("object"!=aa(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==aa(e)?e:e+""}function la(t,e,n){return e=fa(e),function(t,e){if(e&&("object"===aa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sa()?Reflect.construct(e,n||[],fa(t).constructor):e.apply(t,n))}function sa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sa=function(){return!!t})()}function fa(t){return fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fa(t)}function pa(t,e){return pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pa(t,e)}$i(ia,"availableModes",["modal","alert","confirm","prompt"]);var da=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=la(this,e,[t,n,r])).extendConfig={availableModes:["modal","alert"],focusLast:["alert"]},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pa(t,e)}(e,t),n=e,(r=[{key:"pluginName",get:function(){return"alert"}}])&&ua(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(Er);function ha(t){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(t)}function ya(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,va(r.key),r)}}function va(t){var e=function(t,e){if("object"!=ha(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ha(e)?e:e+""}function ba(t,e,n){return e=ga(e),function(t,e){if(e&&("object"===ha(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ma()?Reflect.construct(e,n||[],ga(t).constructor):e.apply(t,n))}function ma(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ma=function(){return!!t})()}function ga(t){return ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ga(t)}function wa(t,e){return wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wa(t,e)}var Oa=new WeakSet,ka=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}(o=ba(this,e,[t,n,r]),Oa),o.extendConfig={availableModes:["modal","confirm"],focusLast:["confirm"],dom:{confirm:{confirm:'[data-modal="ctrl:confirm.confirm"]'}}},o.registerEvents=[["modal.initialized",function(t){(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")})(Oa,o,_a).call(o,t)}],["modal.show",function(){"confirm"===o.context.mode&&(o.context.confirmed=!1)}],["modal.hide",function(t){"confirm"===o.context.mode&&(o.context.confirmed||o.context.dispatchEvent((o.context.config.get("eventPrefix")||"")+"confirm.cancel",null,!0,!0)||t.preventDefault())}]],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wa(t,e)}(e,t),n=e,(r=[{key:"pluginName",get:function(){return"confirm"}}])&&ya(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(Er);function _a(t){var e=this;t.detail.target===this.context&&"confirm"===this.context.mode&&(this.context.requireDomRefs([["close",!0],["confirm.confirm",!1]]),this.context.confirmed=null,Ft(this.context.getDomRefs("confirm.confirm"),[["click",function(t){t.preventDefault(),e.context.dispatchEvent((e.context.config.get("eventPrefix")||"")+"confirm.confirm",null,!0,!0)&&(e.context.confirmed=!0,e.context.hide())}]]))}function xa(t){return xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xa(t)}function ja(){ja=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==xa(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(xa(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Sa(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ea(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Sa(i,r,o,a,u,"next",t)}function u(t){Sa(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Pa(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ta(t,e){return t.get(Aa(t,e))}function La(t,e,n){return t.set(Aa(t,e),n),n}function Aa(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ba(r.key),r)}}function Ma(t,e,n){return e&&Ca(t.prototype,e),n&&Ca(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ba(t){var e=function(t,e){if("object"!=xa(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=xa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xa(e)?e:e+""}function Na(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ra(t,e,n){return e=Da(e),function(t,e){if(e&&("object"===xa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ia()?Reflect.construct(e,n||[],Da(t).constructor):e.apply(t,n))}function Ia(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ia=function(){return!!t})()}function Da(t){return Da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Da(t)}function Fa(t,e){return Fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fa(t,e)}var qa=function(t){function e(){return Na(this,e),Ra(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fa(t,e)}(e,t),Ma(e)}(y),za=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,Ya=function(){return Ma((function t(e,n){Na(this,t),Pa(this,za,void 0),Pa(this,Wa,void 0),Pa(this,Ga,[]),Pa(this,Ha,"index_"),Pa(this,Ua,!1),La(Wa,this,e),La(za,this,n)}),[{key:"storage",get:function(){return Ta(Wa,this)}},{key:"type",get:function(){return Ta(za,this)}},{key:"list",get:function(){return Ta(Ga,this).slice()}},{key:"each",value:(o=Ea(ja().mark((function t(e){var n;return ja().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<Ta(Ga,this).length)){t.next=7;break}return t.next=4,e(Ta(Ga,this)[n]);case 4:n++,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"load",value:(r=Ea(ja().mark((function t(){var e;return ja().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ta(Ua,this)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Ta(Wa,this).get(Ta(Ha,this)+Ta(za,this));case 4:if(e=t.sent){t.next=8;break}return La(Ua,this,!0),t.abrupt("return");case 8:if("string"!=typeof e||!e.length){t.next=16;break}t.prev=9,e=JSON.parse(e),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(9),new qa('Data index failed to decode for "'.concat(this.type,'"'));case 16:if(e instanceof Array){t.next=18;break}throw new qa('Data index corrupted for "'.concat(this.type,'"'));case 18:La(Ga,this,e),La(Ua,this,!0);case 20:case"end":return t.stop()}}),t,this,[[9,13]])}))),function(){return r.apply(this,arguments)})},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){if(Ta(Ga,this).includes(t))throw new qa('Id already exists "'.concat(t,'"'))}else do{t=crypto.randomUUID()}while(Ta(Ga,this).includes(t));return Ta(Ga,this).push(t),t}},{key:"save",value:(n=Ea(ja().mark((function t(){var e;return ja().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,e=JSON.stringify(Ta(Ga,this)),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new qa('Failed to encode index for "'.concat(this.type,'"'),t.t0);case 7:return t.prev=7,t.next=10,Ta(Wa,this).set(Ta(Ha,this)+Ta(za,this),e);case 10:t.next=15;break;case 12:throw t.prev=12,t.t1=t.catch(7),new qa('Failed to save index for "'.concat(this.type,'"'),t.t1);case 15:case"end":return t.stop()}}),t,this,[[0,4],[7,12]])}))),function(){return n.apply(this,arguments)})},{key:"delete",value:(e=Ea(ja().mark((function t(e){var n;return ja().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=Ta(Ga,this).indexOf(e))>-1)){t.next=5;break}return Ta(Ga,this).splice(n,1),t.next=5,this.save();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"reorder",value:(t=Ea(ja().mark((function t(e){var n;return ja().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Ta(Ga,this).filter((function(t){return!e.includes(t)})),La(Ga,this,n.concat(e)),t.next=4,this.save();case 4:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})}]);var t,e,n,r,o}();function Ja(t){return Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ja(t)}function $a(){$a=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Ja(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Ja(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Va(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Za(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Va(i,r,o,a,u,"next",t)}function u(t){Va(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Qa(t,e,n){Ka(t,e),e.set(t,n)}function Ka(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xa(t,e){return t.get(tu(t,e))}function tu(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function eu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ru(r.key),r)}}function nu(t,e,n){return e&&eu(t.prototype,e),n&&eu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ru(t){var e=function(t,e){if("object"!=Ja(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ja(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ja(e)?e:e+""}function ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iu(t,e,n){return e=uu(e),function(t,e){if(e&&("object"===Ja(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,au()?Reflect.construct(e,n||[],uu(t).constructor):e.apply(t,n))}function au(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(au=function(){return!!t})()}function uu(t){return uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uu(t)}function cu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lu(t,e)}function lu(t,e){return lu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lu(t,e)}var su=function(t){function e(){return ou(this,e),iu(this,e,arguments)}return cu(e,t),nu(e)}(y),fu=new WeakMap,pu=new WeakMap,du=new WeakMap,hu=new WeakMap,yu=new WeakMap,vu=new WeakSet,bu=function(t){function e(t,n){var r,o,i,a,u,c;return ou(this,e),Ka(o=r=iu(this,e,[null,t,n]),i=vu),i.add(o),Qa(r,fu,void 0),Qa(r,pu,{}),Qa(r,du,{}),Qa(r,hu,"local"),Qa(r,yu,["local"]),a=fu,u=r,c=new Rt("ntz_"),a.set(tu(a,u),c),r}return cu(e,t),nu(e,[{key:"local",get:function(){return Xa(fu,this)}},{key:"load",value:(s=Za($a().mark((function t(e){var n,r,o;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.debug&&this.debug.log(this.constructor.name+".load()"),e&&e.length){t.next=3;break}throw new su("Requires at least one data type");case 3:if(!(n=this.local.get("driver"))||Xa(yu,this).includes(n)){t.next=6;break}throw new su('Unknown storage driver "'.concat(n,'"'));case 6:for(n||(this.debug&&this.debug.log(this.constructor.name+".load() using default localStorage driver"),n=Xa(hu,this)),r=0;r<e.length;r++)tu(vu,this,mu).call(this,e[r]);if(this.debug&&this.debug.log(this.constructor.name+".load() registered ".concat(e.length," data types")),t.prev=9,"local"!==n){t.next=16;break}if(!this.debug){t.next=16;break}return t.next=14,Rt.getCurrentSize();case 14:o=t.sent,this.debug.log(this.constructor.name+".load(".concat(n,") ").concat(on(o)," in use."));case 16:t.next=21;break;case 18:throw t.prev=18,t.t0=t.catch(9),new su('Failed to initialize storage driver "'.concat(n,'"'),t.t0);case 21:this.dispatchEvent("storage.ready");case 22:case"end":return t.stop()}}),t,this,[[9,18]])}))),function(t){return s.apply(this,arguments)})},{key:"storageSize",value:(l=Za($a().mark((function t(){var e,n,r=arguments;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(r.length>0&&void 0!==r[0])||r[0],t.next=3,Rt.getCurrentSize();case 3:if(n=t.sent,!e){t.next=6;break}return t.abrupt("return",on(n));case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"models",get:function(){return Xa(du,this)}},{key:"requireIndex",value:(c=Za($a().mark((function t(e){return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(tu(vu,this,gu).call(this,e),Xa(pu,this)[e]){t.next=5;break}return Xa(pu,this)[e]=new Ya(this,e),t.next=5,Xa(pu,this)[e].load();case 5:return t.abrupt("return",Xa(pu,this)[e]);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"typeHasData",value:(u=Za($a().mark((function t(e){var n,r;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return tu(vu,this,gu).call(this,e),t.next=3,this.requireIndex(e);case 3:return n=t.sent,r=n.list,this.debug&&this.debug.log("Storage.typeHasData(".concat(e,") ").concat(r.length," entries")),t.abrupt("return",!!r.length);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"typeList",value:(a=Za($a().mark((function t(e){var n,r,o,i,a=arguments;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,r=tu(vu,this,gu).call(this,e),t.next=4,this.requireIndex(e);case 4:return o=t.sent,i=[],t.next=8,o.each(function(){var t=Za($a().mark((function t(e){var o;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=new r(null,n)).load(e),i.push(o);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:return t.abrupt("return",i);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"get",value:(n=Za($a().mark((function t(e){var n,r;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this[Xa(hu,this)],this.debug&&this.debug.warn("Storage.get(".concat(Xa(hu,this),"::").concat(e,")")),t.next=4,n.get(e);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"set",value:(i=Za($a().mark((function t(e,n){var r;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.debug&&this.debug.log("Storage.set(".concat(Xa(hu,this),"::").concat(e,")")),"string"==typeof e&&e.length){t.next=3;break}throw new su("First argument id must be a non empty string");case 3:if("string"==typeof n){t.next=5;break}throw new su("Second argument value must be a string");case 5:return r=this[Xa(hu,this)],t.next=8,r.set(e,n);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"remove",value:(o=Za($a().mark((function t(e){var n;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.debug&&this.debug.log("Storage.remove(".concat(Xa(hu,this),"::").concat(e,")")),"string"==typeof e&&e.length){t.next=3;break}throw new su("First argument id must be a non empty string");case 3:return n=this[Xa(hu,this)],t.next=6,n.remove(e);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"clear",value:(r=Za($a().mark((function t(){var e;return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this[Xa(hu,this)],t.next=3,e.clear();case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]);var n,r,o,i,a,u,c,l,s}(W);function mu(t){if(Xa(du,this)[t.modelType])throw new su('Model "'.concat(t.modelType,'" already defined'));Xa(du,this)[t.modelType]=t}function gu(t){if(!Xa(du,this)[t])throw new su('Unknown type "'.concat(t,'"'));return Xa(du,this)[t]}function wu(t){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(t)}function Ou(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||ku(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ku(t,e){if(t){if("string"==typeof t)return _u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_u(t,e):void 0}}function _u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xu(){xu=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==wu(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(wu(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function ju(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Su(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ju(i,r,o,a,u,"next",t)}function u(t){ju(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Eu(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Pu(t,e,n){return(e=Bu(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tu(t,e,n){return t.set(Au(t,e),n),n}function Lu(t,e){return t.get(Au(t,e))}function Au(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Cu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bu(r.key),r)}}function Mu(t,e,n){return e&&Cu(t.prototype,e),n&&Cu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bu(t){var e=function(t,e){if("object"!=wu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=wu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wu(e)?e:e+""}function Nu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ru(t,e,n){return e=Du(e),function(t,e){if(e&&("object"===wu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Iu()?Reflect.construct(e,n||[],Du(t).constructor):e.apply(t,n))}function Iu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Iu=function(){return!!t})()}function Du(t){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Du(t)}function Fu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qu(t,e)}function qu(t,e){return qu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qu(t,e)}var zu=function(t){function e(){return Nu(this,e),Ru(this,e,arguments)}return Fu(e,t),Mu(e)}(y),Wu=new WeakMap,Gu=new WeakMap,Hu=new WeakMap,Uu=new WeakMap,Yu=new WeakMap,Ju=new WeakMap,$u=new WeakMap,Vu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Nu(this,e),Eu(t=Ru(this,e,[null,r,o]),Wu,null),Eu(t,Gu,null),Eu(t,Hu,{}),Eu(t,Uu,!1),Eu(t,Yu,{}),Eu(t,Ju,!1),Eu(t,$u,{}),t.initialize(),n&&t.assign(n),t}return Fu(e,t),Mu(e,[{key:"stats",get:function(){return Lu($u,this)},set:function(t){var e=!0;null!=t&&t.noAsync&&(delete t.noAsync,e=!1),Q(Lu($u,this),t,!0,!0),this.update(e)}},{key:"initialize",value:function(){var t=this;if(!Lu(Ju,this)){Object.defineProperty(this,"type",{get:function(){return t.constructor.modelType},enumerable:!0,configurable:!1}),Object.defineProperty(this,"id",{get:function(){return t._id()},enumerable:!0,configurable:!1});for(var e=Object.keys(this.constructor.modelFields),n=function(){var n=e[r];Object.defineProperty(t,n,{get:function(){return t._get(n)},set:function(e){t._set(n,e)},enumerable:!0,configurable:!1})},r=0;r<e.length;r++)n();Tu(Ju,this,!0)}}},{key:"_get",value:function(t){var e,n;return null!==(e=Lu(Hu,this)[t])&&void 0!==e?e:null===(n=this.constructor.modelFields[t])||void 0===n?void 0:n.value}},{key:"_set",value:function(t,e){Lu(Hu,this)[t]!==e&&Tu(Uu,this,!0),Lu(Hu,this)[t]=e}},{key:"_id",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return Lu(Wu,this)}))},{key:"importId",set:function(t){Tu(Gu,this,t)}},{key:"data",get:function(){for(var t={},e=Object.keys(this.constructor.modelFields),n=0;n<e.length;n++){var r=e[n];t[r]=this._get(r)}return t.id=Lu(Wu,this),t}},{key:"dom",get:function(){var t;return null!==(t=Lu(Yu,this)[this.constructor.modelType])&&void 0!==t?t:null}},{key:"view",value:function(t){var e;return null!==(e=Lu(Yu,this)[t])&&void 0!==e?e:null}},{key:"children",get:function(){return this.dom.querySelector(this.constructor.childrenHost)}},{key:"hasChanges",value:function(){return Lu(Uu,this)}},{key:"assign",value:function(t){var e=this.constructor.validate(t);if(!e.valid)throw this.debug&&this.debug.error(t,e.errors),new zu("Failed to assign invalid data");for(var n=Object.keys(this.constructor.modelFields),r=!1,o=0;o<n.length;o++){var i=n[o];void 0!==t[i]&&(Lu(Hu,this)[i]!==t[i]&&(r=!0),Lu(Hu,this)[i]=t[i])}Tu(Uu,this,r)}},{key:"load",value:(o=Su(xu().mark((function t(e){var n,r,o;return xu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.constructor.modelType,t.next=3,this.constructor.storage.get(n+"_"+e);case 3:if(r=t.sent){t.next=6;break}throw new zu("Model data not found for ".concat(n,"[").concat(e,"]"));case 6:t.prev=6,o=JSON.parse(r),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(6),new zu("Failed to decode model data for ".concat(n,"[").concat(e,"]"),t.t0);case 13:if(b(o)){t.next=15;break}throw new zu("Corrupted model data for ".concat(n,"[").concat(e,"]"));case 15:this.assign(o),Tu(Wu,this,e),Tu(Uu,this,!1),this.dispatchEvent("model.loaded");case 19:case"end":return t.stop()}}),t,this,[[6,10]])}))),function(t){return o.apply(this,arguments)})},{key:"save",value:(r=Su(xu().mark((function t(){var e,n,r,o,i=arguments;return xu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]&&i[0],this.debug&&this.debug.log(this.constructor.name+".save(".concat(this.constructor.modelType,", ").concat(Lu(Hu,this).id||"null",")")),this.constructor.storage){t.next=4;break}throw new zu("Storage driver not available");case 4:if(Lu(Uu,this)){t.next=6;break}return t.abrupt("return");case 6:t.prev=6,n=JSON.stringify(Lu(Hu,this)),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(6),new zu("Failed to encode data");case 13:if(r=!1,Lu(Wu,this)){t.next=21;break}return t.next=17,this.constructor.storage.requireIndex(this.constructor.modelType);case 17:o=t.sent,Tu(Wu,this,o.create(Lu(Gu,this))),Tu(Gu,this,null),r=!0;case 21:return t.next=23,this.constructor.storage.set(this.constructor.modelType+"_"+Lu(Wu,this),n);case 23:if(!r){t.next=26;break}return t.next=26,o.save();case 26:Tu(Uu,this,!1),e||this.dispatchEvent("model.saved",{created:r});case 28:case"end":return t.stop()}}),t,this,[[6,10]])}))),function(){return r.apply(this,arguments)})},{key:"delete",value:(n=Su(xu().mark((function t(){var e;return xu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.debug&&this.debug.log(this.constructor.name+".save(".concat(this.constructor.modelType,", ").concat(Lu(Hu,this).id||"null",")")),this.constructor.storage){t.next=3;break}throw new zu("Storage driver not available");case 3:return t.next=5,this.constructor.storage.requireIndex(this.constructor.modelType);case 5:return e=t.sent,t.next=8,this.constructor.storage.remove(this.constructor.modelType+"_"+Lu(Wu,this));case 8:return t.next=10,e.delete(Lu(Wu,this));case 10:Tu(Wu,this,null),Tu(Uu,this,!0),this.dispatchEvent("model.deleted");case 13:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null!==(t=n.template)&&void 0!==t?t:this.constructor.modelType,o=null!==(e=n.append)&&void 0!==e?e:this.parent.children;return Lu(Yu,this)[r]=uo.node({template:r,data:this.data})[0],n.model=this,this.constructor.bind(Lu(Yu,this)[r],n),o.appendChild(Lu(Yu,this)[r]),Lu(Yu,this)[r]}},{key:"clearRender",value:function(t){Lu(Yu,this)[t]&&delete Lu(Yu,this)[t]}},{key:"update",value:function(){var t,e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.constructor.modelType;if(Lu(Yu,this)[o]){var i=function(t){if(Array.isArray(t))return _u(t)}(t=Lu(Yu,this)[o].querySelectorAll("[data-model-update]"))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ku(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();r||(i=i.filter((function(t){return!e.children.contains(t)})));for(var a=0;a<i.length;a++)for(var u=i[a],c=u.getAttribute("data-model-update").split("|"),l=0;l<c.length;l++){var s=Ou(c[l].split(":"),3),f=s[0],p=s[1],d=s[2],h=Xt(p,this,1,this.debug);if(h||0===h)switch(f){case"text":u.innerText=h;break;case"html":u.innerHTML=h;break;case"attr":u.setAttribute(d,h)}}n&&this.updateAsync&&this.updateAsync()}}},{key:"isOpen",value:function(){return this.dom.classList.contains("".concat(this.type,"--open"))}},{key:"actionOpen",value:function(){var t=this;this.dispatchEvent("".concat(this.type,".open")),this.dom.classList.add("".concat(this.type,"--open")),i((function(){t.dispatchEvent("".concat(t.type,".opened"))}))}},{key:"actionClose",value:function(){var t=this;this.isMaximized()&&this.actionMinimize(),this.dispatchEvent("".concat(this.type,".close")),this.dom.classList.remove("".concat(this.type,"--open")),i((function(){t.dispatchEvent("".concat(t.type,".closed"))}))}},{key:"isMaximized",value:function(){return this.dom.classList.contains("".concat(this.type,"--maximized"))}},{key:"actionMaximize",value:function(){var t=this;this.dispatchEvent("".concat(this.type,".maximize")),this.dom.classList.add("".concat(this.type,"--maximized")),this.dom.setAttribute("data-is-maximized","true"),this.parent.children.setAttribute("data-has-maximized","true"),i((function(){t.dispatchEvent("".concat(t.type,".maximized"))}))}},{key:"actionMinimize",value:function(){var t=this;this.dispatchEvent("".concat(this.type,".minimize")),this.dom.classList.remove("".concat(this.type,"--maximized")),this.dom.removeAttribute("data-is-maximized"),this.parent.children.removeAttribute("data-has-maximized"),i((function(){t.dispatchEvent("".concat(t.type,".minimized"))}))}}],[{key:"labelGenerator",value:function(t){return fn(t.replace(/^[A-Z]/g,(function(t){return" "+t.toLowerCase()})).replace(/[A-Z]/g,(function(t){return" "+t.toLowerCase()})).replace("modal","popup").replace("nav","navigation"))}},{key:"form",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={template:"fieldset",data:{},as:{content:[]}},n=Object.entries(this.modelFields),r=0;r<n.length;r++){var o=Ou(n[r],2),i=o[0],a=o[1],u={template:"input",data:g(a,!0)};if(u.data.name=i,u.data.classes=["ui-input--".concat(ln(i)),"ui-input--grow","ui-input--grow-label","ui-input--label-multiline"],"textarea"===a.type?u.data.classes.push("ui-input--wide"):u.data.classes.push("ui-input--horizontal","ui-input--spaced"),u.data.label||(u.data.label={text:this.labelGenerator(i)}),"number"===a.type&&u.data.classes.push("ui-input--input-align-right"),"select"===a.type&&a.options){u.data.options=[];for(var c=0;c<a.options.length;c++){var l=a.options[c];u.data.options.push({label:this.labelGenerator(l),value:l})}}switch(null!==t&&void 0!==t[i]?u.data.value=t[i]:t||void 0===a.value||(u.data.value=a.value),a.type){case"text":u.data.maxlen=a.max;break;case"checkbox":u.data.checked=u.data.value}e.as.content.push(u)}return[e]}},{key:"getFormData",value:function(t){for(var e=new Ao(t,!1,this.app.debug).get(),n=Object.entries(this.modelFields),r=0;r<n.length;r++){var o=Ou(n[r],2),i=o[0],a=o[1];void 0===e[i]&&"checkbox"===a.type&&(e[i]=!1)}return e}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t instanceof HTMLElement))throw new zu("Nothing to bind");e.dom=t,this.app.bindActions(this.modelActions,t,e);for(var n=0;n<this.modelBinds.length;n++){(0,this.modelBinds[n])(e)}}},{key:"bindForm",value:function(t,e){for(var n=t.querySelectorAll('input:not([type="hidden"]), select, textarea'),r=function(){var t=n[o],r=t.closest(".ui-input"),i=r.querySelector(".ui-input__error");t.addEventListener("blur",(function(){r.classList.remove("ui-input--error"),r.classList.remove("ui-input--error-visible"),i.innerHTML=""})),t.addEventListener("keyup",(function(t){"Enter"===t.key&&e.getDomRefs("confirm.confirm",!1).click()}))},o=0;o<n.length;o++)r()}},{key:"validate",value:function(t){for(var e=!0,n={},r=Object.entries(this.modelFields),o=0;o<r.length;o++){var i=Ou(r[o],2),a=i[0];i[1].required&&dn(t[a])&&(e=!1,n[a]||(n[a]=[]),n[a].push("Field <q>".concat(this.labelGenerator(a),"</q> is required.")))}return e&&(n=null),{valid:e,errors:n}}}]);var n,r,o}(W);function Zu(t){return Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(t)}function Qu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oc(r.key),r)}}function Ku(t,e,n){return e=ec(e),function(t,e){if(e&&("object"===Zu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xu()?Reflect.construct(e,n||[],ec(t).constructor):e.apply(t,n))}function Xu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xu=function(){return!!t})()}function tc(){return tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ec(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},tc.apply(this,arguments)}function ec(t){return ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ec(t)}function nc(t,e){return nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nc(t,e)}function rc(t,e,n){return(e=oc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oc(t){var e=function(t,e){if("object"!=Zu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Zu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zu(e)?e:e+""}function ic(){ic=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Zu(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Zu(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function ac(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function uc(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ac(i,r,o,a,u,"next",t)}function u(t){ac(i,r,o,a,u,"throw",t)}a(void 0)}))}}Pu(Vu,"app",null),Pu(Vu,"storage",null),Pu(Vu,"modelType","default"),Pu(Vu,"modelParentType","default"),Pu(Vu,"modelFields",{}),Pu(Vu,"modelBinds",[]),Pu(Vu,"modelActions",{}),Pu(Vu,"childrenHost",null),Pu(Vu,"childrenType",null);var cc={"item.open":[["click",function(t,e){t.preventDefault(),e.model.actionOpen()}]],"item.close":[["click",function(t,e){t.preventDefault(),e.model.actionClose()}]],"item.modal":[["click",function(t,e){t.preventDefault(),e.model.dispatchEvent("item.modal")}]],"item.link":[["click",function(t,e){t.preventDefault();var n=null;switch(e.model.variant){case"url":n=e.model.url;break;case"youtube":n=e.model.youtubeLink}n&&window.open(n,"_blank")}]],"item.mark":[["click",function(){var t=uc(ic().mark((function t(e,n){return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n.model.dispatchEvent("item.mark"),n.model.marked=!0,t.next=5,n.model.save();case 5:n.model.dom.classList.add("item--marked"),i((function(){n.model.dispatchEvent("item.marked")}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]],"item.unmark":[["click",function(){var t=uc(ic().mark((function t(e,n){return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n.model.dispatchEvent("item.unmark"),n.model.marked=!1,t.next=5,n.model.save();case 5:n.model.dom.classList.remove("item--marked"),i((function(){n.model.dispatchEvent("item.unmarked")}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]],"item.edit":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.showModelModal("item",e.model,"edit")}]],"item.delete":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.view.deleteModel(e.model)}]],"item.more":[["click",function(){var t=uc(ic().mark((function t(e,n){return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n.model.amount=n.model.amount+1,t.next=4,n.model.save();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]],"item.less":[["click",function(){var t=uc(ic().mark((function t(e,n){return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n.model.amount=n.model.amount-1,t.next=4,n.model.save();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]],"item.up":[["click",Yt((function(t,e){e.model.constructor.app.view.updateIndexOrder(e.model.parent)}),750,(function(t,e){t.preventDefault();var n=e.model.dom;if(!n.previousElementSibling)return!0;n.parentElement.insertBefore(n,n.previousElementSibling)}))]],"item.down":[["click",Yt((function(t,e){e.model.constructor.app.view.updateIndexOrder(e.model.parent)}),750,(function(t,e){t.preventDefault();var n=e.model.dom;if(!n.nextElementSibling)return!0;It(n,n.nextElementSibling)}))]]},lc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ku(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nc(t,e)}(e,t),n=e,r=[{key:"youtubeLink",get:function(){return dn(this.youtube)?null:"https://www.youtube.com/watch?v=".concat(this.youtube)}},{key:"update",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.dom.classList[this.marked?"add":"remove"]("item--marked");for(var r=this.constructor.modelFields.variant.options,o=0;o<r.length;o++){var i=r[o];this.dom.classList[i===this.variant?"add":"remove"]("item--".concat(i))}tc(ec(e.prototype),"update",this).call(this,t,n)}}],r&&Qu(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(Vu);function sc(t){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(t)}function fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bc(r.key),r)}}function pc(t,e,n){return e=hc(e),function(t,e){if(e&&("object"===sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dc()?Reflect.construct(e,n||[],hc(t).constructor):e.apply(t,n))}function dc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dc=function(){return!!t})()}function hc(t){return hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hc(t)}function yc(t,e){return yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yc(t,e)}function vc(t,e,n){return(e=bc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bc(t){var e=function(t,e){if("object"!=sc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sc(e)?e:e+""}rc(lc,"modelType","item"),rc(lc,"modelParentType","group"),rc(lc,"childrenHost",".item__children"),rc(lc,"modelFields",{rel:{type:"hidden",required:!0},label:{type:"text",max:60,required:!0},marked:{type:"checkbox",value:!1},variant:{label:{text:"Type"},type:"select",value:"label",options:["label","url","note","youtube"],required:!0},amount:{type:"number",value:0},note:{type:"textarea",value:""},url:{label:{text:"URL including protocol"},type:"text",value:""},youtube:{label:{text:"Youtube id"},type:"text",value:""}}),rc(lc,"modelActions",cc),rc(lc,"modelBinds",[function(t){if(t.modal){var e=t.modal.dom.querySelector('[name="variant"]');e.addEventListener("change",(function(){t.modal.dom.setAttribute("data-item-variant",e.value)})),t.modal.dom.setAttribute("data-item-variant",e.value)}}]);var mc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yc(t,e)}(e,t),n=e,o=[{key:"modalRender",value:function(t){t.as["footer.controls.before"]='<button class="ui-button ui-button--icon ui-button--hide-label-m" data-action="settings.reset" data-modal="ctrl:close" type="button"><span class="ui-icon" data-icon="update"><span></span></span><span class="ui-button__label">Reset</span></button>'}}],(r=[{key:"applySettings",value:function(){document.documentElement.setAttribute("data-interface-size",this.interfaceSize),this.constructor.app.view.dom.classList[this.showOrderControls?"add":"remove"]("view--show-order-controls"),this.constructor.app.view.dom[this.exclusiveMaximize?"setAttribute":"removeAttribute"]("data-exclusive-maximize","true"),this.constructor.app.view.dom.setAttribute("data-note-style",this.itemShowNote),this.constructor.app.view.dom.setAttribute("data-youtube-style",this.itemShowYoutube),document.documentElement.style.setProperty("--modal-youtube-width","".concat(this.modalYoutubeWidth,"%"));for(var t=["boardColumns","groupColumns","groupColumnsMax","itemColumns","itemColumnsMax","itemColumnsMaxMax"],e=0;e<t.length;e++){var n=t[e],r=ln(n);document.documentElement.style.setProperty("--".concat(r),this._get(n))}lc.modelFields.variant.value=this.defaultVariant}}])&&fc(n.prototype,r),o&&fc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vu);vc(mc,"modelType","settings"),vc(mc,"modelFields",{interfaceSize:{label:{text:"Interface size"},type:"select",value:window.innerWidth<768?"mobile":"default",options:["tiny","small","default","mobile","medium","large"]},showOrderControls:{label:{text:"Always show controls to change the order"},type:"checkbox",value:!1},boardColumns:{label:{text:"Board columns (not maximized)"},type:"number",min:1,value:window.innerWidth<992?1:2},groupColumns:{label:{text:"Group columns (Board not maximized)"},type:"number",min:1,value:window.innerWidth<992?1:2},groupColumnsMax:{label:{text:"Group columns (Board maximized)"},type:"number",min:1,value:window.innerWidth<992?1:4},itemColumns:{label:{text:"Item columns (Board + Group not maximized)"},type:"number",min:1,value:1},itemColumnsMax:{label:{text:"Item columns (Board not, Group maximized)"},type:"number",min:1,value:window.innerWidth<992?1:2},itemColumnsMaxMax:{label:{text:"Item columns (Board + Group maximized)"},type:"number",min:1,value:window.innerWidth<992?1:4},defaultVariant:{label:{text:"Default variant when creating a new item"},type:"select",value:"label",options:["label","note","url","youtube"]},exclusiveMaximize:{label:{text:"Show only maximized board or group"},type:"checkbox",value:!0},easyHideModals:{label:{text:"Allow cancelling popups by escape key or background click"},type:"checkbox",value:!1},itemShowNote:{label:{text:"Show note content as"},type:"select",value:"content",options:["content","modal","both"]},itemShowYoutube:{label:{text:"Show youtube player as"},type:"select",value:"modal",options:["content","modal","both"]},modalYoutubeWidth:{label:{text:"Youtube player popup size"},prefix:"25%",suffix:"100%",type:"range",min:25,value:window.innerWidth<992?100:65,max:100,step:1}}),vc(mc,"modelActions",{"settings.reset":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.resetSettings()}]]}),vc(mc,"modelBinds",[function(t){t.dom.addEventListener("modal.hidden",(function(e){e.detail.target.confirmed||t.model.constructor.app.settings.applySettings()}));var e=t.dom.querySelector('[name="interfaceSize"]');e.addEventListener("change",(function(){document.documentElement.setAttribute("data-interface-size",e.value)}));var n=t.dom.querySelector('[name="showOrderControls"]');n.addEventListener("change",(function(){t.model.constructor.app.view.dom.classList[n.checked?"add":"remove"]("view--show-order-controls")}));var r=t.dom.querySelector('[name="exclusiveMaximize"]');r.addEventListener("change",(function(){t.model.constructor.app.view.dom[r.checked?"setAttribute":"removeAttribute"]("data-exclusive-maximize","true")}));var o=t.dom.querySelector('[name="itemShowNote"]');o.addEventListener("change",(function(){t.model.constructor.app.view.dom.setAttribute("data-note-style",o.value)}));var i=t.dom.querySelector('[name="itemShowYoutube"]');i.addEventListener("change",(function(){t.model.constructor.app.view.dom.setAttribute("data-youtube-style",i.value)}));for(var a=t.dom.querySelectorAll(['[name="boardColumns"]','[name="groupColumns"]','[name="groupColumnsMax"]','[name="itemColumns"]','[name="itemColumnsMax"]','[name="itemColumnsMaxMax"]'].join(", ")),u=function(){var t=a[c];t.addEventListener("change",(function(){var e=ln(t.getAttribute("name"));document.documentElement.style.setProperty("--".concat(e),parseInt(t.value))}))},c=0;c<a.length;c++)u()}]);var gc=JSON.parse('{"theme":"classic","modalColorHeaderText":"#ffffff","modalColorHeaderTextOpacity":100,"modalColorHeaderBackground":"#00008b","modalColorHeaderBackgroundOpacity":100,"modalColorFooterText":"#ffffff","modalColorFooterTextOpacity":100,"modalColorFooterBackground":"#00008b","modalColorFooterBackgroundOpacity":100,"modalColorText":"#00008b","modalColorTextOpacity":100,"modalColorBackground":"#ffffff","modalColorBackgroundOpacity":100,"modalColorContentBackground":"#ADD8E6","modalColorContentBackgroundOpacity":100,"modalColorBackdrop":"#00008b","modalColorBackdropOpacity":80,"modalColorShadow":"#000000","modalColorShadowOpacity":100,"buttonColorBackgroundInteractive":"#ffffff","buttonColorBackgroundInteractiveOpacity":25,"inputColorBackground":"#ffffff","inputColorBackgroundOpacity":100,"errorColorText":"#ffffff","errorColorTextOpacity":100,"errorColorBackground":"#B22222","errorColorBackgroundOpacity":100,"errorColorShadow":"#000000","errorColorShadowOpacity":100,"tooltipColorText":"#000000","tooltipColorTextOpacity":100,"tooltipColorBackground":"#FFD700","tooltipColorBackgroundOpacity":100,"tooltipColorShadow":"#000000","tooltipColorShadowOpacity":100,"viewColorBackground":"#F5F5F5","viewColorBackgroundOpacity":100,"contentColorSpacer":"#FFFFFF","contentColorSpacerOpacity":100,"boardColorBackground":"#000000","boardColorBackgroundOpacity":10,"boardColorNavText":"#ffffff","boardColorNavTextOpacity":100,"boardColorNavBackground":"#00008b","boardColorNavBackgroundOpacity":100,"groupColorBackground":"#ADD8E6","groupColorBackgroundOpacity":100,"groupColorNavText":"#ffffff","groupColorNavTextOpacity":100,"groupColorNavBackground":"#0000CD","groupColorNavBackgroundOpacity":100,"groupColorNavBackgroundMarked":"#8B0000","groupColorNavBackgroundMarkedOpacity":100,"groupColorNavBackgroundCompleted":"#006400","groupColorNavBackgroundCompletedOpacity":100,"itemColorText":"#000000","itemColorTextOpacity":100,"itemColorBackground":"#F5F5F5","itemColorBackgroundOpacity":100,"itemColorNavText":"#ffffff","itemColorNavTextOpacity":100,"itemColorNavBackground":"#B22222","itemColorNavBackgroundOpacity":100,"itemColorNavBackgroundMarked":"#228B22","itemColorNavBackgroundMarkedOpacity":100}');function wc(t){return wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(t)}function Oc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ec(r.key),r)}}function kc(t,e,n){return e=xc(e),function(t,e){if(e&&("object"===wc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_c()?Reflect.construct(e,n||[],xc(t).constructor):e.apply(t,n))}function _c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_c=function(){return!!t})()}function xc(t){return xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xc(t)}function jc(t,e){return jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jc(t,e)}function Sc(t,e,n){return(e=Ec(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ec(t){var e=function(t,e){if("object"!=wc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=wc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wc(e)?e:e+""}function Pc(){Pc=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==wc(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(wc(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Tc(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}var Lc={classic:o.t(gc,2)},Ac={"theme.reset":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.resetTheme()}]],"theme.apply":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.importTheme()}]],"theme.copy":[["click",function(){var t,e=(t=Pc().mark((function t(e,n){var r;return Pc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),delete(r=n.model.data).id,t.next=5,Ht(JSON.stringify(r));case 5:t.sent&&n.model.constructor.app.showAlertModal("Copied to clipboard",'<div class="ui-text"><p>The theme JSON was copied to your clipboard,<br />Press <q>ctrl/cmd + v</q> to paste into any text input or editor.</p></div>');case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Tc(i,r,o,a,u,"next",t)}function u(t){Tc(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t,n){return e.apply(this,arguments)}}()]]},Cc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jc(t,e)}(e,t),n=e,o=[{key:"modalRender",value:function(t){t.as["header.controls.custom"]=['<button class="ui-button ui-button--icon ui-button--hide-label-m" data-action="theme.apply" data-modal="ctrl:close" type="button"><span class="ui-icon" data-icon="action-import"><span></span></span><span class="ui-button__label">Import</span></button>','<button class="ui-button ui-button--icon ui-button--hide-label-m" data-action="theme.copy" type="button"><span class="ui-icon" data-icon="action-export"><span></span></span><span class="ui-button__label">Export</span></button>'],t.as["footer.controls.before"]=['<button class="ui-button ui-button--icon ui-button--hide-label-m" data-action="theme.reset" data-modal="ctrl:close" type="button"><span class="ui-icon" data-icon="update"><span></span></span><span class="ui-button__label">Reset</span></button>']}}],(r=[{key:"applyTheme",value:function(){for(var t=["modalColorHeaderText","modalColorHeaderBackground","modalColorFooterText","modalColorFooterBackground","modalColorText","modalColorBackground","modalColorContentBackground","modalColorBackdrop","modalColorShadow","buttonColorBackgroundInteractive","inputColorBackground","errorColorText","errorColorBackground","errorColorShadow","tooltipColorText","tooltipColorBackground","tooltipColorShadow","viewColorBackground","contentColorSpacer","boardColorBackground","boardColorNavText","boardColorNavBackground","groupColorBackground","groupColorNavText","groupColorNavBackground","groupColorNavBackgroundMarked","groupColorNavBackgroundCompleted","itemColorText","itemColorBackground","itemColorNavText","itemColorNavBackground","itemColorNavBackgroundMarked"],e=0;e<t.length;e++){var n=t[e],r=cn(this._get(n),an(this._get("".concat(n,"Opacity"))/100));document.documentElement.style.setProperty("--".concat(ln(n)),r)}}}])&&Oc(n.prototype,r),o&&Oc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vu);function Mc(t){return Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(t)}function Bc(t,e,n){return e=Rc(e),function(t,e){if(e&&("object"===Mc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nc()?Reflect.construct(e,n||[],Rc(t).constructor):e.apply(t,n))}function Nc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nc=function(){return!!t})()}function Rc(t){return Rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rc(t)}function Ic(t,e){return Ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ic(t,e)}function Dc(t,e,n){return(e=Fc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fc(t){var e=function(t,e){if("object"!=Mc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mc(e)?e:e+""}Sc(Cc,"modelType","theme"),Sc(Cc,"modelFields",{theme:{label:{text:"Select theme"},type:"select",value:"classic",options:["custom","classic"]},modalColorHeaderText:{type:"color",value:"#ffffff"},modalColorHeaderTextOpacity:{type:"range",min:0,value:100,max:100,step:1},modalColorHeaderBackground:{type:"color",value:"#00008b"},modalColorHeaderBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},modalColorFooterText:{type:"color",value:"#ffffff"},modalColorFooterTextOpacity:{type:"range",min:0,value:100,max:100,step:1},modalColorFooterBackground:{type:"color",value:"#00008b"},modalColorFooterBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},modalColorText:{type:"color",value:"#00008b"},modalColorTextOpacity:{type:"range",min:0,value:100,max:100,step:1},modalColorBackground:{type:"color",value:"#ffffff"},modalColorBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},modalColorContentBackground:{type:"color",value:"#ADD8E6"},modalColorContentBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},modalColorBackdrop:{type:"color",value:"#00008b"},modalColorBackdropOpacity:{type:"range",min:0,value:80,max:100,step:1},modalColorShadow:{type:"color",value:"#000000"},modalColorShadowOpacity:{type:"range",min:0,value:100,max:100,step:1},buttonColorBackgroundInteractive:{type:"color",value:"#ffffff"},buttonColorBackgroundInteractiveOpacity:{type:"range",min:0,value:25,max:100,step:1},inputColorBackground:{type:"color",value:"#ffffff"},inputColorBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},errorColorText:{type:"color",value:"#ffffff"},errorColorTextOpacity:{type:"range",min:0,value:100,max:100,step:1},errorColorBackground:{type:"color",value:"#B22222"},errorColorBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},errorColorShadow:{type:"color",value:"#000000"},errorColorShadowOpacity:{type:"range",min:0,value:100,max:100,step:1},tooltipColorText:{type:"color",value:"#000000"},tooltipColorTextOpacity:{type:"range",min:0,value:100,max:100,step:1},tooltipColorBackground:{type:"color",value:"#FFD700"},tooltipColorBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},tooltipColorShadow:{type:"color",value:"#000000"},tooltipColorShadowOpacity:{type:"range",min:0,value:100,max:100,step:1},viewColorBackground:{type:"color",value:"#F5F5F5"},viewColorBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},contentColorSpacer:{type:"color",value:"#FFFFFF"},contentColorSpacerOpacity:{type:"range",min:0,value:100,max:100,step:1},boardColorBackground:{type:"color",value:"#000000"},boardColorBackgroundOpacity:{type:"range",min:0,value:10,max:100,step:1},boardColorNavText:{type:"color",value:"#ffffff"},boardColorNavTextOpacity:{type:"range",min:0,value:100,max:100,step:1},boardColorNavBackground:{type:"color",value:"#00008b"},boardColorNavBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},groupColorBackground:{type:"color",value:"#ADD8E6"},groupColorBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},groupColorNavText:{type:"color",value:"#ffffff"},groupColorNavTextOpacity:{type:"range",min:0,value:100,max:100,step:1},groupColorNavBackground:{type:"color",value:"#0000CD"},groupColorNavBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},groupColorNavBackgroundMarked:{type:"color",value:"#8B0000"},groupColorNavBackgroundMarkedOpacity:{type:"range",min:0,value:100,max:100,step:1},groupColorNavBackgroundCompleted:{type:"color",value:"#006400"},groupColorNavBackgroundCompletedOpacity:{type:"range",min:0,value:100,max:100,step:1},itemColorText:{type:"color",value:"#000000"},itemColorTextOpacity:{type:"range",min:0,value:100,max:100,step:1},itemColorBackground:{type:"color",value:"#F5F5F5"},itemColorBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},itemColorNavText:{type:"color",value:"#ffffff"},itemColorNavTextOpacity:{type:"range",min:0,value:100,max:100,step:1},itemColorNavBackground:{type:"color",value:"#B22222"},itemColorNavBackgroundOpacity:{type:"range",min:0,value:100,max:100,step:1},itemColorNavBackgroundMarked:{type:"color",value:"#228B22"},itemColorNavBackgroundMarkedOpacity:{type:"range",min:0,value:100,max:100,step:1}}),Sc(Cc,"modelActions",Ac),Sc(Cc,"modelBinds",[function(t){t.dom.addEventListener("modal.hidden",(function(e){e.detail.target.confirmed||t.model.constructor.app.theme.applyTheme()}));for(var e=t.dom.querySelectorAll(['[type="color"]','[type="range"]'].join(", ")),n="Opacity",r=function(){var r=e[o];r.addEventListener("change",(function(){var e=r.getAttribute("name");e.substring(e.length-7)===n&&(e=e.substring(0,e.length-7));var o=t.dom.querySelector('[name="'.concat(e,'"]')),i=t.dom.querySelector('[name="'.concat(e).concat(n,'"]')),a=cn(o.value,an(i.value/100));document.documentElement.style.setProperty("--".concat(ln(e)),a)}))},o=0;o<e.length;o++)r();var i=t.dom.querySelector('[name="theme"]'),a=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="custom"===e,o=t.dom.querySelectorAll(".ui-input--color, .ui-input--range"),i=0;i<o.length;i++)if(o[i].style.display=r?"":"none",!n&&!r){var a=o[i].querySelector("input");Lc[e]&&void 0!==Lc[e][a.name]&&(a.value=Lc[e][a.name],a.dispatchEvent(new CustomEvent("change")))}};i.addEventListener("change",(function(){a(i.value)})),a(i.value,!0)}]);var qc={"board.toggle":[["click",function(t,e){t.preventDefault(),e.model.isOpen()?e.model.actionClose():e.model.actionOpen()}]],"board.open":[["click",function(t,e){t.preventDefault(),e.model.actionOpen()}]],"board.close":[["click",function(t,e){t.preventDefault(),e.model.actionClose()}]],"board.maximize":[["click",function(t,e){t.preventDefault(),e.model.actionMaximize()}]],"board.minimize":[["click",function(t,e){t.preventDefault(),e.model.actionMinimize()}]],"board.edit":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.showModelModal("board",e.model,"edit")}]],"board.delete":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.view.deleteModel(e.model)}]],"group.create":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.showModelModal("group",null,"create",e.model)}]],"board.up":[["click",Yt((function(t,e){e.model.constructor.app.view.updateIndexOrder(e.model.parent)}),750,(function(t,e){t.preventDefault();var n=e.model.dom;if(!n.previousElementSibling)return!0;n.parentElement.insertBefore(n,n.previousElementSibling)}))]],"board.down":[["click",Yt((function(t,e){e.model.constructor.app.view.updateIndexOrder(e.model.parent)}),750,(function(t,e){t.preventDefault();var n=e.model.dom;if(!n.nextElementSibling)return!0;It(n,n.nextElementSibling)}))]]},zc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ic(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(Vu);function Wc(t){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wc(t)}function Gc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zc(r.key),r)}}function Hc(t,e,n){return e=Jc(e),function(t,e){if(e&&("object"===Wc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Uc()?Reflect.construct(e,n||[],Jc(t).constructor):e.apply(t,n))}function Uc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Uc=function(){return!!t})()}function Yc(){return Yc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jc(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Yc.apply(this,arguments)}function Jc(t){return Jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jc(t)}function $c(t,e){return $c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$c(t,e)}function Vc(t,e,n){return(e=Zc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zc(t){var e=function(t,e){if("object"!=Wc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Wc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wc(e)?e:e+""}function Qc(){Qc=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Wc(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Wc(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Kc(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Xc(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Kc(i,r,o,a,u,"next",t)}function u(t){Kc(i,r,o,a,u,"throw",t)}a(void 0)}))}}Dc(zc,"modelType","board"),Dc(zc,"childrenType","group"),Dc(zc,"childrenHost",".board__children"),Dc(zc,"modelFields",{label:{type:"text",max:60,required:!0}}),Dc(zc,"modelActions",qc);var tl={"group.toggle":[["click",function(t,e){t.preventDefault(),e.model.isOpen()?e.model.actionClose():e.model.actionOpen()}]],"group.open":[["click",function(t,e){t.preventDefault(),e.model.actionOpen()}]],"group.close":[["click",function(t,e){t.preventDefault(),e.model.actionClose()}]],"group.maximize":[["click",function(t,e){t.preventDefault(),e.model.actionMaximize()}]],"group.minimize":[["click",function(t,e){t.preventDefault(),e.model.actionMinimize()}]],"group.marked":[["click",function(){var t=Xc(Qc().mark((function t(e,n){return Qc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n.model.dispatchEvent("group.mark"),n.model.marked=!0,t.next=5,n.model.save();case 5:n.model.dom.classList.add("group--marked"),i((function(){n.model.dispatchEvent("group.marked")}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]],"group.unmarked":[["click",function(){var t=Xc(Qc().mark((function t(e,n){return Qc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n.model.dispatchEvent("group.unmark"),n.model.marked=!1,t.next=5,n.model.save();case 5:n.model.dom.classList.remove("group--marked"),i((function(){n.model.dispatchEvent("group.unmarked")}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]],"group.edit":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.showModelModal("group",e.model,"edit")}]],"group.delete":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.view.deleteModel(e.model)}]],"item.create":[["click",function(t,e){t.preventDefault(),e.model.constructor.app.showModelModal("item",null,"create",e.model)}]],"group.up":[["click",Yt((function(t,e){e.model.constructor.app.view.updateIndexOrder(e.model.parent)}),750,(function(t,e){t.preventDefault();var n=e.model.dom;if(!n.previousElementSibling)return!0;n.parentElement.insertBefore(n,n.previousElementSibling)}))]],"group.down":[["click",Yt((function(t,e){e.model.constructor.app.view.updateIndexOrder(e.model.parent)}),750,(function(t,e){t.preventDefault();var n=e.model.dom;if(!n.nextElementSibling)return!0;It(n,n.nextElementSibling)}))]]},el=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$c(t,e)}(e,t),n=e,r=[{key:"updateAsync",value:(o=Xc(Qc().mark((function t(){var e,n,r;return Qc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.constructor.app.view.getModels("item",null,{rel:this.id});case 2:if((e=t.sent).length){t.next=6;break}return this.stats={itemUnmarked:0,itemMarked:0,noAsync:!0},t.abrupt("return");case 6:return t.next=8,this.constructor.app.view.loadModelsParent(e);case 8:for(n=0,r=0;r<e.length;r++)e[r].marked&&n++;this.dom&&this.dom.classList[e.length-n>0?"remove":"add"]("group--completed"),this.stats={itemUnmarked:e.length-n,itemMarked:n,noAsync:!0};case 12:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"update",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dom.classList[this.marked?"add":"remove"]("group--marked"),Yc(Jc(e.prototype),"update",this).call(this,t)}}],r&&Gc(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vu);function nl(t){return nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(t)}function rl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ol(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ol(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ol(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function il(){il=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==nl(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(nl(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function al(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ul(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){al(i,r,o,a,u,"next",t)}function u(t){al(i,r,o,a,u,"throw",t)}a(void 0)}))}}function cl(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function ll(t,e){return t.get(sl(t,e))}function sl(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function fl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dl(r.key),r)}}function pl(t,e,n){return e&&fl(t.prototype,e),n&&fl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dl(t){var e=function(t,e){if("object"!=nl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=nl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nl(e)?e:e+""}function hl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yl(t,e,n){return e=bl(e),function(t,e){if(e&&("object"===nl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vl()?Reflect.construct(e,n||[],bl(t).constructor):e.apply(t,n))}function vl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vl=function(){return!!t})()}function bl(t){return bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bl(t)}function ml(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gl(t,e)}function gl(t,e){return gl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gl(t,e)}Vc(el,"modelType","group"),Vc(el,"modelParentType","board"),Vc(el,"childrenType","item"),Vc(el,"childrenHost",".group__children"),Vc(el,"modelFields",{rel:{type:"hidden",required:!0},label:{type:"text",max:60,required:!0},marked:{label:{text:"Show unmarked items only"},type:"checkbox",value:!0}}),Vc(el,"modelActions",tl);var wl,Ol,kl,_l=function(t){function e(){return hl(this,e),yl(this,e,arguments)}return ml(e,t),pl(e)}(y),xl=new WeakMap,jl=new WeakMap,Sl=new WeakMap,El=new WeakMap,Pl=function(t){function e(t,n){var r;hl(this,e),cl(r=yl(this,e,[null,t,n]),xl,{}),cl(r,jl,{}),cl(r,Sl,{}),cl(r,El,!1);try{r.bind()}catch(t){throw new _l("Failed to bind view",t)}return r}return ml(e,t),pl(e,[{key:"stats",get:function(){return ll(Sl,this)},set:function(t){Q(ll(Sl,this),t,!0,!0)}},{key:"update",value:function(){return null}},{key:"dom",get:function(){return document.getElementById("view")}},{key:"children",get:function(){return this.dom.querySelector(".boards__list")}},{key:"bind",value:function(){var t,e=this;ll(El,this)||(this.parent.addEventListener("data.ready",ul(il().mark((function t(){var n;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getModels("board",e);case 2:n=t.sent,e.renderModels(n),e.bindModels(n),n&&1===n.length&&(e.parent.selectAction("board.open",n[0].dom)[0].click(),e.parent.selectAction("board.maximize",n[0].dom)[0].click());case 6:case"end":return t.stop()}}),t)})))),this.addEventListener("board.open",function(){var t=ul(il().mark((function t(n){var r;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getModels("group",null,{rel:n.detail.target.id});case 2:return r=t.sent,n.detail.target.stats={group:r.length},t.next=6,e.loadModelsParent(r);case 6:e.renderModels(r),e.bindModels(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.addEventListener("board.maximized",(function(t){var n=t.detail.target.parent.children.closest("[data-scroller]");e.parent.scrollTo(t.detail.target.dom,null,0,n)})),this.addEventListener("board.close",(function(t){t.detail.target.children.innerHTML=""})),this.addEventListener("group.open",function(){var t=ul(il().mark((function t(n){var r;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getModels("item",null,{rel:n.detail.target.id});case 2:return r=t.sent,n.detail.target.stats={item:r.length},t.next=6,e.loadModelsParent(r);case 6:e.renderModels(r),e.bindModels(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.addEventListener("group.maximized",(function(t){var n=t.detail.target.parent.children.closest("[data-scroller]");e.parent.scrollTo(t.detail.target.dom,null,0,n)})),this.addEventListener("group.close",(function(t){t.detail.target.children.innerHTML=""})),this.addEventListener("item.open",(function(t){var e=t.detail.target;e.render({template:"item"+fn(e.variant),append:e.children})})),this.addEventListener("item.close",(function(t){t.detail.target.children.innerHTML=""})),this.addEventListener("item.modal",(function(t){var n=t.detail.target,r="item"+fn(n.variant),o="".concat(fn(n.variant)," <strong>-</strong> ").concat(n.parent.label," <strong>-</strong> ").concat(n.label);e.parent.showAlertModal(o,'<div class="ui-modal__dialog-children" data-children></div>',(function(){n.clearRender(r)}),(function(t){t.data.classes=["ui-modal--".concat(n.type),"ui-modal--".concat(n.type,"-").concat(n.variant)],t.data.footer=null}),(function(t){n.render({template:r,append:t.querySelector("[data-children]")})}))})),this,!0,(t=El).set(sl(t,this),true))}},{key:"loadModelsParent",value:(h=ul(il().mark((function t(e){var n,r,o;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e instanceof Array||(e=[e]),n=0;case 2:if(!(n<e.length)){t.next=12;break}if((r=e[n]).parent){t.next=9;break}return t.next=7,this.getModels(r.constructor.modelParentType,null,{id:r.rel});case 7:o=t.sent,r.overrideParent(o[0]);case 9:n++,t.next=2;break;case 12:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"getModels",value:(d=ul(il().mark((function t(e){var n,r,o,i,a,u,c=arguments;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:null,o=c.length>2&&void 0!==c[2]?c[2]:null,ll(xl,this)[e]){t.next=7;break}return t.next=5,this.parent.storage.typeList(e,r);case 5:ll(jl,this)[e]=t.sent,ll(xl,this)[e]=!0;case 7:return i=null,o&&(a=Object.entries(o),u=a.length,i=ll(jl,this)[e].filter((function(t){for(var e=0,n=0;n<a.length;n++){var r=rl(a[n],2),o=r[0],i=r[1];t[o]===i&&e++}return e===u}))),t.abrupt("return",o?null!==(n=i)&&void 0!==n?n:[]:ll(jl,this)[e]);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"createModel",value:(p=ul(il().mark((function t(e,n){var r,o,i,a,u,c=arguments;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:null,a={model:null!=(o=c.length>2&&void 0!==c[2]?c[2]:null)?o:this,dom:null!==(r=null==o?void 0:o.children)&&void 0!==r?r:this.dom.list},u=new e(n,a.model,this.debug),i&&(u.importId=i),i||this.bindModels(u),ll(jl,this)[e.modelType]||(ll(jl,this)[e.modelType]=[]),ll(jl,this)[e.modelType].push(u),t.next=10,u.save();case 10:return t.abrupt("return",u);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return p.apply(this,arguments)})},{key:"updateModel",value:(f=ul(il().mark((function t(e,n){return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assign(n),t.next=3,e.save();case 3:case"end":return t.stop()}}),t)}))),function(t,e){return f.apply(this,arguments)})},{key:"deleteModel",value:function(t){var e=this,n="Delete ".concat(fn(t.type)),r='<div class="ui-text"><p>Are you sure you want to delete <q>'.concat(un(t.label),"</q>?</p></div>");this.parent.showConfirmModal(n,r,(function(){e.deleteModelStructure(t)}))}},{key:"deleteRealModel",value:(s=ul(il().mark((function t(e){var n;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ll(jl,this)[e.type]&&(n=ll(jl,this)[e.type].indexOf(e))>-1&&ll(jl,this)[e.type].splice(n,1),t.next=3,e.delete();case 3:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"deleteModelStructure",value:(l=ul(il().mark((function t(e){return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.constructor.childrenType){t.next=3;break}return t.next=3,this.deleteChildrenFrom(e);case 3:return t.next=5,this.deleteRealModel(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"deleteChildrenFrom",value:(c=ul(il().mark((function t(e){var n,r;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getModels(e.constructor.childrenType,null,{rel:e.id});case 2:n=t.sent,r=0;case 4:if(!(r<n.length)){t.next=10;break}return t.next=7,this.deleteModelStructure(n[r]);case 7:r++,t.next=4;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"updateIndexOrder",value:(u=ul(il().mark((function t(e){var n,r,o,i;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.children.children,r=[],o=0;o<n.length;o++)r.push(n[o].id);return t.next=5,this.parent.storage.requireIndex(e.constructor.childrenType);case 5:return i=t.sent,t.next=8,i.reorder(r);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"renderModels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t instanceof Array||(t=[t]);for(var n=0;n<t.length;n++)t[n].render(g(e))}},{key:"refreshModels",value:function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++)t[e].update()}},{key:"removeModels",value:function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++)t[e].dom.remove()}},{key:"bindModels",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t instanceof Array||(t=[t]);for(var r=function(){var r=t[o];r.addEventListener("model.saved",(function(t){if(r===t.detail.target){if(t.detail.created){var o;e.renderModels(r,n);var a={};if(a[r.type]=(null!==(o=r.parent.stats[r.type])&&void 0!==o?o:0)+1,r.parent.stats=a,"board"===r.type){var u=e.parent.selectAction("board.open",r.dom);u.length&&u[0].click(),i((function(){var t=e.parent.selectAction("group.create",r.dom);t.length&&t[0].focus()}))}if("group"===r.type){var c=e.parent.selectAction("group.open",r.dom);c.length&&c[0].click(),i((function(){var t=e.parent.selectAction("item.create",r.dom);t.length&&t[0].focus()}))}}else e.refreshModels(r);r.parent.update()}})),r.addEventListener("model.deleted",(function(t){var n;if(r===t.detail.target){var o={};o[r.type]=(null!==(n=r.parent.stats[r.type])&&void 0!==n?n:1)-1,r.parent.stats=o,e.removeModels(r),r.parent.update()}}))},o=0;o<t.length;o++)r()}},{key:"export",value:(a=ul(il().mark((function t(){var e,n,r,o,i,a,u=arguments;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(u.length>0&&void 0!==u[0])||u[0],t.next=3,this.getModels("board");case 3:return n=t.sent,t.next=6,this.getModels("group");case 6:return r=t.sent,t.next=9,this.getModels("item");case 9:if(o=t.sent,i={board:n,group:r,item:o},a=JSON.stringify(i,(function(t,e){return e instanceof Vu?e.data:dn(e)?void 0:e})),e){t.next=14;break}return t.abrupt("return",JSON.parse(a));case 14:return t.abrupt("return",new Blob([a],{type:"application/json"}));case 15:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"importData",value:(o=ul(il().mark((function t(e){var n,r,o,i;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.board.length)){t.next=24;break}if((r=e.board[n]).id){t.next=5;break}return t.abrupt("continue",21);case 5:return t.next=7,this.getModels("board",null,{id:r.id});case 7:if(o=t.sent,i=void 0,!o.length){t.next=16;break}return(i=o.pop()).assign(r),t.next=14,i.save(!0);case 14:t.next=19;break;case 16:return t.next=18,this.createModel(zc,r,null,r.id);case 18:i=t.sent;case 19:return t.next=21,this.importNested(e,i);case 21:n++,t.next=1;break;case 24:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"importNested",value:(r=ul(il().mark((function t(e,n){var r,o,i,a,u;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.constructor.childrenType,o=0;case 2:if(!(o<e[r].length)){t.next=28;break}if((i=e[r][o]).id){t.next=6;break}return t.abrupt("continue",25);case 6:if(i.rel===n.id){t.next=8;break}return t.abrupt("continue",25);case 8:return t.next=10,this.getModels(r,n,{id:i.id,rel:n.id});case 10:if(a=t.sent,u=void 0,!a.length){t.next=19;break}return(u=a.pop()).assign(i),t.next=17,u.save(!0);case 17:t.next=22;break;case 19:return t.next=21,this.createModel(this.parent.storage.models[r],i,null,i.id);case 21:u=t.sent;case 22:if(!u.constructor.childrenType){t.next=25;break}return t.next=25,this.importNested(e,u);case 25:o++,t.next=2;break;case 28:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"importJSONString",value:(n=ul(il().mark((function t(e){var n,r,o,i,a;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,b(n=JSON.parse(e))&&n.board&&n.board instanceof Array&&(!n.group||n.group instanceof Array)&&(!n.item||n.item instanceof Array)){t.next=4;break}throw new Error("Invalid json format");case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),r=t.t0;case 9:if(r){t.next=18;break}return t.prev=10,t.next=13,this.importData(n);case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(10),r=t.t1;case 18:a=null,r?(o="JSON import error",i="Failed to import: ".concat(r.toString())):(o="JSON import complete",i="Imported all connected data. The application will reload automatically.",a=function(){location.reload()}),this.parent.showAlertModal(o,i,a);case 21:case"end":return t.stop()}}),t,this,[[0,6],[10,15]])}))),function(t){return n.apply(this,arguments)})}]);var n,r,o,a,u,c,l,s,f,p,d,h}(W);function Tl(t){return Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(t)}function Ll(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cl(r.key),r)}}function Al(t,e,n){return e&&Ll(t.prototype,e),n&&Ll(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cl(t){var e=function(t,e){if("object"!=Tl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tl(e)?e:e+""}function Ml(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bl(t,e,n){return e=Rl(e),function(t,e){if(e&&("object"===Tl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nl()?Reflect.construct(e,n||[],Rl(t).constructor):e.apply(t,n))}function Nl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nl=function(){return!!t})()}function Rl(t){return Rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rl(t)}function Il(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dl(t,e)}function Dl(t,e){return Dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dl(t,e)}wl=Pl,kl="board",(Ol=dl(Ol="childrenType"))in wl?Object.defineProperty(wl,Ol,{value:kl,enumerable:!0,configurable:!0,writable:!0}):wl[Ol]=kl;var Fl=function(t){function e(){return Ml(this,e),Bl(this,e,arguments)}return Il(e,t),Al(e)}(y),ql=function(t){function e(){var t;Ml(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(t,e,n){(e=Cl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(t=Bl(this,e,[].concat(r)),"_defaults",{id:null,label:null}),t}return Il(e,t),Al(e,[{key:"_validate",value:function(t){if("string"!=typeof t.id||!t.id.length)throw new Fl("Requires a valid id");if("string"!=typeof t.label||!t.label.length)throw new Fl("Requires a valid label")}},{key:"_render",value:function(t){return'<section id="'.concat(t.id,'" data-type="board" class="board">')+'<nav class="board__nav ui-wrap ui-wrap--object-nav"><div data-nav="options"><div data-nav="nav"><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-nav="show" type="button"><span class="ui-icon" data-icon="menu"><span></span></span><span class="ui-button__label ui-tooltip__tip">Show options</span></button><div data-nav="drop" tabindex="0"><div class="ui-wrap ui-wrap--options-drop"><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="board.up" data-keep type="button"><span class="ui-button__label ui-tooltip__tip">Move up</span><span class="ui-icon ui-icon--rotate-270" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="board.down" data-keep type="button"><span class="ui-button__label ui-tooltip__tip">Move down</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="board.edit" type="button"><span class="ui-icon" data-icon="action-edit"><span></span></span><span class="ui-button__label ui-tooltip__tip">Edit</span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="board.delete" type="button"><span class="ui-icon" data-icon="action-delete"><span></span></span><span class="ui-button__label ui-tooltip__tip">Delete</span></button></div></div></div><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-nav="hide" type="button"><span class="ui-icon" data-icon="close"><span></span></span><span class="ui-button__label ui-tooltip__tip">Hide options</span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="board.up" type="button"><span class="ui-button__label ui-tooltip__tip">Move up</span><span class="ui-icon ui-icon--rotate-270" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="board.down" type="button"><span class="ui-button__label ui-tooltip__tip">Move down</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button></div>'+'<label class="board__label" title="'.concat(t.id,'" data-action="board.toggle"><strong data-model-update="text:label">').concat(un(t.label),"</strong></label>")+'<div data-nav="interactive"><button class="ui-button ui-button--icon ui-tooltip ui-interactive" data-tip="bl" data-action="board.minimize" type="button"><span class="ui-button__label ui-tooltip__tip">Minimize</span><span class="ui-icon" data-icon="minimize"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip ui-interactive" data-tip="bl" data-action="board.maximize" type="button"><span class="ui-button__label ui-tooltip__tip">Maximize</span><span class="ui-icon" data-icon="fullscreen"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="bl" data-action="board.open" type="button"><span class="ui-button__label ui-tooltip__tip">Open</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="bl" data-action="board.close" type="button"><span class="ui-button__label ui-tooltip__tip">Close</span><span class="ui-icon" data-icon="close-small"><span></span></span></button></div></nav><div class="board__content"><div class="board__scroll" data-scroller><ol class="board__children" data-children></ol></div></div><nav class="board__nav ui-wrap ui-wrap--object-nav"><div class="ui-button ui-button--icon ui-button--label-hidden ui-button--static"><span class="ui-icon" data-icon="stats"><span></span></span><span class="ui-button__label">Board statistics</span></div><div class="board__stats"><em><span data-model-update="attr:stats.group:data-stats-count" data-stats-count="0"><strong data-model-update="text:stats.group">0</strong> group<span>s</span></span></em></div><div data-nav="interactive"><button class="ui-button ui-button--icon ui-tooltip" data-tip="tl" data-action="group.create" type="button"><span class="ui-button__label ui-tooltip__tip">Add group</span><span class="ui-icon" data-icon="action-create"><span></span></span></button></div></nav></section>'}}])}(Jr);function zl(t){return zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(t)}function Wl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hl(r.key),r)}}function Gl(t,e,n){return e&&Wl(t.prototype,e),n&&Wl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hl(t){var e=function(t,e){if("object"!=zl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=zl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zl(e)?e:e+""}function Ul(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yl(t,e,n){return e=$l(e),function(t,e){if(e&&("object"===zl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jl()?Reflect.construct(e,n||[],$l(t).constructor):e.apply(t,n))}function Jl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jl=function(){return!!t})()}function $l(t){return $l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$l(t)}function Vl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zl(t,e)}function Zl(t,e){return Zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zl(t,e)}var Ql=function(t){function e(){return Ul(this,e),Yl(this,e,arguments)}return Vl(e,t),Gl(e)}(y),Kl=function(t){function e(){var t;Ul(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(t,e,n){(e=Hl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(t=Yl(this,e,[].concat(r)),"_defaults",{id:null,rel:null,label:null,marked:!0}),t}return Vl(e,t),Gl(e,[{key:"_validate",value:function(t){if("string"!=typeof t.id||!t.id.length)throw new Ql("Requires a valid id");if("string"!=typeof t.rel||!t.rel.length)throw new Ql("Requires a valid relation");if("string"!=typeof t.label||!t.label.length)throw new Ql("Requires a valid label")}},{key:"_render",value:function(t){var e=["group"];return t.marked&&e.push("group--marked"),'<section id="'.concat(t.id,'" data-type="group" class="').concat(e.join(" "),'">')+'<nav class="group__nav ui-wrap ui-wrap--object-nav"><div data-nav="options"><div data-nav="nav"><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-nav="show" type="button"><span class="ui-icon" data-icon="menu"><span></span></span><span class="ui-button__label ui-tooltip__tip">Show options</span></button><div data-nav="drop" tabindex="0"><div class="ui-wrap ui-wrap--options-drop"><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.unmarked" type="button"><span class="ui-button__label ui-tooltip__tip">Show all items</span><span class="ui-icon" data-icon="check"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.marked" type="button"><span class="ui-button__label ui-tooltip__tip">Show only unmarked items</span><span class="ui-icon" data-icon="close-small"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.up" data-keep type="button"><span class="ui-button__label ui-tooltip__tip">Move up</span><span class="ui-icon ui-icon--rotate-270" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.down" data-keep type="button"><span class="ui-button__label ui-tooltip__tip">Move down</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.edit" type="button"><span class="ui-icon" data-icon="action-edit"><span></span></span><span class="ui-button__label ui-tooltip__tip">Edit</span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.delete" type="button"><span class="ui-icon" data-icon="action-delete"><span></span></span><span class="ui-button__label ui-tooltip__tip">Delete</span></button></div></div></div><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-nav="hide" type="button"><span class="ui-icon" data-icon="close"><span></span></span><span class="ui-button__label ui-tooltip__tip">Hide options</span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.up" type="button"><span class="ui-button__label ui-tooltip__tip">Move up</span><span class="ui-icon ui-icon--rotate-270" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="br" data-action="group.down" type="button"><span class="ui-button__label ui-tooltip__tip">Move down</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button></div>'+'<label class="group__label" title="'.concat(t.id,'" data-action="group.toggle"><strong data-model-update="text:label">').concat(un(t.label),"</strong></label>")+'<div data-nav="interactive"><button class="ui-button ui-button--icon ui-tooltip ui-interactive" data-tip="bl" data-action="group.minimize" type="button"><span class="ui-button__label ui-tooltip__tip">Minimize</span><span class="ui-icon" data-icon="minimize"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip ui-interactive" data-tip="bl" data-action="group.maximize" type="button"><span class="ui-button__label ui-tooltip__tip">Maximize</span><span class="ui-icon" data-icon="fullscreen"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="bl" data-action="group.open" type="button"><span class="ui-button__label ui-tooltip__tip">Open</span><span class="ui-icon  ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="bl" data-action="group.close" type="button"><span class="ui-button__label ui-tooltip__tip">Close</span><span class="ui-icon" data-icon="close-small"><span></span></span></button></div></nav><div class="group__content"><div class="group__scroll" data-scroller><div class="group__children" data-children></div></div></div><nav class="group__nav ui-wrap ui-wrap--object-nav"><div class="ui-button ui-button--icon ui-button--label-hidden ui-button--static ui-tooltip" data-tip="tr"><span class="ui-icon" data-icon="stats"><span></span></span><span class="ui-button__label ui-tooltip__tip">Group statistics</span></div><div class="group__stats"><em><span data-model-update="attr:stats.item:data-stats-count" data-stats-count="0"><strong data-model-update="text:stats.item">0</strong> item<span>s</span></span> <span data-model-update="attr:stats.itemMarked:data-stats-count" data-stats-count="0"><strong data-model-update="text:stats.itemMarked">0</strong> marked </span><span data-model-update="attr:stats.itemUnmarked:data-stats-count" data-stats-count="0"><strong data-model-update="text:stats.itemUnmarked">0</strong> unmarked</span></em></div><div data-nav="interactive"><button class="ui-button ui-button--icon ui-tooltip" data-tip="tl" data-action="item.create" type="button"><span class="ui-button__label ui-tooltip__tip">Add item</span><span class="ui-icon" data-icon="action-create"><span></span></span></button></div></nav></section>'}}])}(Jr);function Xl(t){return Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(t)}function ts(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ns(r.key),r)}}function es(t,e,n){return e&&ts(t.prototype,e),n&&ts(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ns(t){var e=function(t,e){if("object"!=Xl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Xl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xl(e)?e:e+""}function rs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function os(t,e,n){return e=as(e),function(t,e){if(e&&("object"===Xl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,is()?Reflect.construct(e,n||[],as(t).constructor):e.apply(t,n))}function is(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(is=function(){return!!t})()}function as(t){return as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},as(t)}function us(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cs(t,e)}function cs(t,e){return cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cs(t,e)}var ls=function(t){function e(){return rs(this,e),os(this,e,arguments)}return us(e,t),es(e)}(y),ss=function(t){function e(){var t;rs(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(t,e,n){(e=ns(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(t=os(this,e,[].concat(r)),"_defaults",{id:null,rel:null,label:null,marked:!1,variant:null,amount:0,note:null,youtube:null}),t}return us(e,t),es(e,[{key:"_validate",value:function(t){if("string"!=typeof t.id||!t.id.length)throw new ls("Requires a valid id");if("string"!=typeof t.rel||!t.rel.length)throw new ls("Requires a valid relation");if("string"!=typeof t.label||!t.label.length)throw new ls("Requires a valid label");if("string"!=typeof t.variant||!t.variant.length)throw new ls("Requires a valid variant")}},{key:"_render",value:function(t){var e=["item","item--".concat(t.variant)];return t.marked&&e.push("item--marked"),'<article id="'.concat(t.id,'" data-type="item" class="').concat(e.join(" "),'">')+'<nav class="item__nav ui-wrap ui-wrap--object-nav"><div data-nav="options"><div data-nav="nav"><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-nav="show" type="button"><span class="ui-icon" data-icon="menu"><span></span></span><span class="ui-button__label ui-tooltip__tip">Show options</span></button><div data-nav="drop" tabindex="0"><div class="ui-wrap ui-wrap--options-drop"><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.up" data-keep type="button"><span class="ui-button__label ui-tooltip__tip">Move up</span><span class="ui-icon ui-icon--rotate-270" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.down" data-keep type="button"><span class="ui-button__label ui-tooltip__tip">Move down</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.more" type="button"><span class="ui-button__label ui-tooltip__tip">More</span><span class="ui-icon" data-icon="add"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.less" type="button"><span class="ui-button__label ui-tooltip__tip">Less</span><span class="ui-icon" data-icon="remove"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.edit" type="button"><span class="ui-icon" data-icon="action-edit"><span></span></span><span class="ui-button__label ui-tooltip__tip">Edit</span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.delete" type="button"><span class="ui-icon" data-icon="action-delete"><span></span></span><span class="ui-button__label ui-tooltip__tip">Delete</span></button></div></div></div><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-nav="hide" type="button"><span class="ui-icon" data-icon="close"><span></span></span><span class="ui-button__label ui-tooltip__tip">Hide options</span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.up" type="button"><span class="ui-button__label ui-tooltip__tip">Move up</span><span class="ui-icon ui-icon--rotate-270" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.down" type="button"><span class="ui-button__label ui-tooltip__tip">Move down</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button></div>'+'<div class="item__amount" data-model-update="attr:amount:data-item-amount" data-item-amount="'.concat(t.amount,'">')+'<div data-nav="options"><div data-nav="nav"><button class="ui-button" data-nav="show" type="button">'+'<span class="ui-button__label" data-model-update="text:amount">'.concat(t.amount,"</span>")+'</button><div data-nav="drop" tabindex="0"><div class="ui-wrap ui-wrap--options-drop"><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.more" type="button"><span class="ui-button__label ui-tooltip__tip">More</span><span class="ui-icon" data-icon="add"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="r" data-action="item.less" type="button"><span class="ui-button__label ui-tooltip__tip">Less</span><span class="ui-icon" data-icon="remove"><span></span></span></button></div></div></div><button class="ui-button" data-nav="hide" type="button">'+'<span class="ui-button__label" data-model-update="text:amount">'.concat(t.amount,"</span>")+"</button></div></div>"+'<label class="item__label" title="'.concat(t.id,'"><strong data-model-update="text:label">').concat(un(t.label),"</strong></label>")+'<div data-nav="interactive"><button class="ui-button ui-button--icon ui-tooltip" data-tip="l" data-action="item.open" type="button"><span class="ui-button__label ui-tooltip__tip">Open</span><span class="ui-icon ui-icon--rotate-90" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="l" data-action="item.close" type="button"><span class="ui-button__label ui-tooltip__tip">Close</span><span class="ui-icon" data-icon="close-small"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="l" data-action="item.modal" type="button"><span class="ui-button__label ui-tooltip__tip">Show in popup</span><span class="ui-icon" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="l" data-action="item.link" type="button"><span class="ui-button__label ui-tooltip__tip">Show in new window</span><span class="ui-icon ui-icon--rotate-315" data-icon="arrow-simple"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="l" data-action="item.unmark" type="button"><span class="ui-button__label ui-tooltip__tip">Unmark</span><span class="ui-icon" data-icon="check"><span></span></span></button><button class="ui-button ui-button--icon ui-tooltip" data-tip="l" data-action="item.mark" type="button"><span class="ui-button__label ui-tooltip__tip">Mark</span><span class="ui-icon" data-icon="close-small"><span></span></span></button></div></nav><div class="item__content"><div class="item__scroll" data-scroller><div class="item__children" data-children></div></div></div></article>'}}])}(Jr);function fs(t){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fs(t)}function ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hs(r.key),r)}}function ds(t,e,n){return e&&ps(t.prototype,e),n&&ps(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hs(t){var e=function(t,e){if("object"!=fs(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fs(e)?e:e+""}function ys(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vs(t,e,n){return e=ms(e),function(t,e){if(e&&("object"===fs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bs()?Reflect.construct(e,n||[],ms(t).constructor):e.apply(t,n))}function bs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bs=function(){return!!t})()}function ms(t){return ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ms(t)}function gs(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ws(t,e)}function ws(t,e){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ws(t,e)}var Os=function(t){function e(){return ys(this,e),vs(this,e,arguments)}return gs(e,t),ds(e)}(y),ks=function(t){function e(){var t;ys(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(t,e,n){(e=hs(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(t=vs(this,e,[].concat(r)),"_defaults",{id:null,note:null}),t}return gs(e,t),ds(e,[{key:"_validate",value:function(t){if("string"!=typeof t.id||!t.id.length)throw new Os("Requires a valid id")}},{key:"_render",value:function(t){var e;return'<div data-type="note" class="note"><div class="note__wrap" data-model-update="text:note">'.concat(un(null!==(e=t.note)&&void 0!==e?e:""),"</div></div>")}}])}(Jr);function _s(t){return _s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_s(t)}function xs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ss(r.key),r)}}function js(t,e,n){return e&&xs(t.prototype,e),n&&xs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ss(t){var e=function(t,e){if("object"!=_s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=_s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_s(e)?e:e+""}function Es(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e,n){return e=Ls(e),function(t,e){if(e&&("object"===_s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ts()?Reflect.construct(e,n||[],Ls(t).constructor):e.apply(t,n))}function Ts(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ts=function(){return!!t})()}function Ls(t){return Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ls(t)}function As(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cs(t,e)}function Cs(t,e){return Cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cs(t,e)}var Ms=function(t){function e(){return Es(this,e),Ps(this,e,arguments)}return As(e,t),js(e)}(y),Bs=function(t){function e(){var t;Es(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(t,e,n){(e=Ss(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(t=Ps(this,e,[].concat(r)),"_defaults",{id:null,youtube:null}),t}return As(e,t),js(e,[{key:"_validate",value:function(t){if("string"!=typeof t.id||!t.id.length)throw new Ms("Requires a valid id");if("string"!=typeof t.youtube||!t.youtube.length)throw new Ms("Requires a valid youtube id")}},{key:"_render",value:function(t){return'<div data-type="youtube" class="youtube"><div class="youtube__wrap">'+'<iframe src="https://www.youtube-nocookie.com/embed/dakOQMNa_2Q?si='.concat(t.youtube,'"')+' title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe></div></div>'}}])}(Jr);function Ns(t){return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(t)}function Rs(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Is(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Is(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Is(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ds(){Ds=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:S(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function b(){}function m(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=g.prototype=b.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Ns(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=E(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Ns(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Fs(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function qs(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Fs(i,r,o,a,u,"next",t)}function u(t){Fs(i,r,o,a,u,"throw",t)}a(void 0)}))}}function zs(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ws(t,e){return t.get(Hs(t,e))}function Gs(t,e,n){return t.set(Hs(t,e),n),n}function Hs(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Js(r.key),r)}}function Ys(t,e,n){return e&&Us(t.prototype,e),n&&Us(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Js(t){var e=function(t,e){if("object"!=Ns(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ns(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ns(e)?e:e+""}function $s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vs(t,e,n){return e=Qs(e),function(t,e){if(e&&("object"===Ns(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zs()?Reflect.construct(e,n||[],Qs(t).constructor):e.apply(t,n))}function Zs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zs=function(){return!!t})()}function Qs(t){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qs(t)}function Ks(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xs(t,e)}function Xs(t,e){return Xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xs(t,e)}var tf=function(t){function e(){return $s(this,e),Vs(this,e,arguments)}return Ks(e,t),Ys(e)}(y),ef=new WeakMap,nf=new WeakMap,rf=new WeakMap,of=new WeakMap,af=new WeakMap,uf=new WeakMap,cf=new WeakMap,lf=new WeakMap,sf=new WeakMap,ff=new WeakMap,pf=function(t){function e(t,n,r,o){var i;$s(this,e),zs(i=Vs(this,e,[document,null,o]),ef,!1),zs(i,nf,!1),zs(i,rf,void 0),zs(i,of,void 0),zs(i,af,void 0),zs(i,uf,void 0),zs(i,cf,!1),zs(i,lf,void 0),zs(i,sf,void 0),zs(i,ff,void 0),Gs(sf,i,t),Gs(ff,i,n),Gs(lf,i,r);try{i.bind()}catch(t){throw new tf("Failed to bind application",t)}return i}return Ks(e,t),Ys(e,[{key:"scrollTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ws(lf,this).scrollTo(t,e,n,r)}},{key:"version",get:function(){return Ws(sf,this)}},{key:"storage",get:function(){return Ws(rf,this)}},{key:"view",get:function(){return Ws(uf,this)}},{key:"settings",get:function(){return Ws(of,this)}},{key:"theme",get:function(){return Ws(af,this)}},{key:"bind",value:function(){var t=this;if(!Ws(nf,this)){var e=document.getElementById("header"),n=document.getElementById("footer");this.addEventListener("storage.ready",qs(Ds().mark((function e(){var n,r;return Ds().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage.typeHasData("settings");case 2:return n=e.sent,e.next=5,t.initSettings(!n);case 5:return e.next=7,t.storage.typeHasData("theme");case 7:return r=e.sent,e.next=10,t.initTheme(!r);case 10:return e.next=12,t.storage.typeHasData("board");case 12:e.sent||Gs(cf,t,!0),t.dispatchEvent("data.ready");case 15:case"end":return e.stop()}}),e)})))),this.addEventListener("data.ready",qs(Ds().mark((function r(){var o;return Ds().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.querySelector("[data-version]").innerText=t.version,Ws(cf,t)&&t.showWelcome(),o=function(){t.selectAction("app.install",e)[0].remove()},window.addEventListener("appinstalled",(function(){o(),delete window._deferredInstallPrompt,t.showInstallThanks()})),t.bindActions({"app.install":[["click",function(){var e=qs(Ds().mark((function e(n){return Ds().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),window._deferredInstallPrompt){e.next=4;break}return o(),e.abrupt("return");case 4:window._deferredInstallPrompt.prompt(),window._deferredInstallPrompt.userChoice.then((function(e){delete window._deferredInstallPrompt,o(),"accepted"===e.outcome&&t.showInstallThanks()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]],"board.create":[["click",function(e){e.preventDefault(),t.showModelModal("board",null,"create")}]],"settings.show":[["click",function(e){e.preventDefault(),t.showModelModal("settings",Ws(of,t),"edit")}]],"theme.show":[["click",function(e){e.preventDefault(),t.showModelModal("theme",Ws(af,t),"edit")}]],"storage.show":[["click",function(e){e.preventDefault(),t.showStorageSetup()}]],"about.show":[["click",function(e){e.preventDefault(),t.showAbout()}]],"privacy.show":[["click",function(e){e.preventDefault(),t.showPrivacy()}]],"app.share":[["click",function(e){e.preventDefault(),t.shareApp()}]]},e,[],(function(t){t.disabled=!1})),t.bindActions({"about.show":[["click",function(e){e.preventDefault(),t.showAbout()}]],"privacy.show":[["click",function(e){e.preventDefault(),t.showPrivacy()}]]},n,[],(function(t){t.disabled=!1}));case 6:case"end":return r.stop()}}),r)})))),Gs(nf,this,!0)}}},{key:"initSettings",value:(c=qs(Ds().mark((function t(){var e,n=arguments;return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.length>0&&void 0!==n[0]&&!n[0]){t.next=5;break}Gs(of,this,new mc(null,this,this.debug)),t.next=9;break;case 5:return t.next=7,this.view.getModels("settings");case 7:e=t.sent,Gs(of,this,e[0]);case 9:Ws(of,this).applySettings(),Ws(of,this).addEventListener("model.saved",(function(t){t.detail.target.applySettings()}));case 11:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"initTheme",value:(u=qs(Ds().mark((function t(){var e,n=arguments;return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.length>0&&void 0!==n[0]&&!n[0]){t.next=5;break}Gs(af,this,new Cc(null,this,this.debug)),t.next=9;break;case 5:return t.next=7,this.view.getModels("theme");case 7:e=t.sent,Gs(af,this,e[0]);case 9:Ws(af,this).applyTheme(),Ws(af,this).addEventListener("model.saved",(function(t){t.detail.target.applyTheme()}));case 11:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"boot",value:(a=qs(Ds().mark((function t(){var e,n,r,o,i,a;return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ws(ef,this)){t.next=2;break}return t.abrupt("return");case 2:for(t.prev=2,uo.debug=this.debug,e={modal:ia,input:_i,fieldset:Vo,form:li,board:ql,group:Kl,item:ss,itemNote:ks,itemYoutube:Bs},n=Object.entries(e),r=0;r<n.length;r++)o=Rs(n[r],2),i=o[0],a=o[1],uo.require(i,new a(null,this.debug));return Gs(rf,this,new bu(this,this.debug)),Vu.app=this,Vu.storage=this.storage,Gs(uf,this,new Pl(this,this.debug)),t.next=13,this.storage.load([mc,Cc,zc,el,lc]);case 13:t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(2),new tf("Failed to boot application",t.t0);case 18:Gs(ef,this,!0),this.dispatchEvent("app.ready");case 20:case"end":return t.stop()}}),t,this,[[2,15]])}))),function(){return a.apply(this,arguments)})},{key:"shareApp",value:function(){var t=this;navigator.share?navigator.share({title:"nutZtash - The private todo and notes tool",text:"The private todo and notes tool for every device",url:Ws(ff,this)}).catch((function(){t.shareCopyUrl()})):this.shareCopyUrl()}},{key:"shareCopyUrl",value:(i=qs(Ds().mark((function t(){return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ht(Ws(ff,this),this.debug);case 2:t.sent&&this.showAlertModal("Copied to clipboard",'<div class="ui-text"><p>The app url was copied to your clipboard.</p></div>');case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"showWelcome",value:function(){var t=this,e=uo.node({template:"modal",data:{id:"modal-welcome",mode:"alert",header:{title:document.querySelector("#welcome .headline").innerHTML},focusable:!1,content:document.querySelector("#welcome .content").innerHTML}})[0];e.addEventListener("modal.initialized",(function(t){t.detail.target.show()})),e.addEventListener("modal.hidden",(function(e){e.detail.target.dom.remove();var n=t.selectAction("board.create",document.getElementById("header"));n.length&&n[0].focus()})),document.body.appendChild(e),Wi.make(e,{mode:"alert"},[da],this,this.debug)}},{key:"showInstallThanks",value:function(){this.showAlertModal("Application installed","<p>Thanks for installing the nutZtash application.</p><p>You may close this window now and open the app from your applications list.</p><p>Please report any issues or bugs to improve the expirence.</p>")}},{key:"showAbout",value:function(){var t=document.querySelector("#about .headline").innerHTML,e=document.querySelector("#about .content").innerHTML;this.showAlertModal(t,e)}},{key:"showPrivacy",value:function(){var t=document.querySelector("#privacy .headline").innerHTML,e=document.querySelector("#privacy .content").innerHTML;this.showAlertModal(t,e)}},{key:"deleteAllData",value:function(){var t=this;this.showConfirmModal("Delete all stored data","Are you sure you wish to delete all stored data, including settings and theme?",qs(Ds().mark((function e(){return Ds().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage.clear();case 2:t.showAlertModal("All data was deleted","Application will reload and present itself in a blank state.",(function(){location.reload()}));case 3:case"end":return e.stop()}}),e)}))))}},{key:"resetSettings",value:(o=qs(Ds().mark((function t(){var e=this;return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ws(of,this).label="current Settings",Ws(of,this).addEventListener("model.deleted",qs(Ds().mark((function t(){return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initSettings();case 2:e.showAlertModal("Defaults restored",'<div class="ui-text"><p>Default settings restored successfully.</p></div>',(function(){e.selectAction("settings.show",document.getElementById("header"))[0].click()}));case 5:case"end":return t.stop()}}),t)})))),t.next=4,Ws(uf,this).deleteModel(Ws(of,this));case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"resetTheme",value:(r=qs(Ds().mark((function t(){var e=this;return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ws(af,this).label="current Theme",Ws(af,this).addEventListener("model.deleted",qs(Ds().mark((function t(){return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initTheme();case 2:e.showAlertModal("Defaults restored",'<div class="ui-text"><p>Default theme restored successfully.</p></div>',(function(){e.selectAction("theme.show",document.getElementById("header"))[0].click()}));case 5:case"end":return t.stop()}}),t)})))),t.next=4,Ws(uf,this).deleteModel(Ws(af,this));case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"importTheme",value:function(){var t=this;this.showConfirmModal("Import theme JSON",[{template:"input",data:{type:"textarea",name:"theme-import-json",width:100}}],function(){var e=qs(Ds().mark((function e(n){var r,o;return Ds().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.detail.target.dom.querySelector('[name="theme-import-json"]').value,e.prev=1,b(o=JSON.parse(r))){e.next=5;break}throw new tf("Must be an object");case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),t.showAlertModal("Failed theme import",'<div class="ui-text"><p>Failed to import theme JSON.</p></div>',(function(){t.importTheme()})),e.abrupt("return");case 13:return Ws(af,t).assign(o),e.next=16,Ws(af,t).save();case 16:Ws(af,t).applyTheme(),t.selectAction("theme.show",document.getElementById("header"))[0].click();case 18:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),(function(t){t.data.icons={confirm:"action-import"},t.data.i18n={confirm:"Import"}}))}},{key:"showStorageSetup",value:(n=qs(Ds().mark((function t(){var e,n,r,o=this;return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="Storage setup",t.next=3,this.storage.storageSize();case 3:n=t.sent,r=['<div class="ui-text">'+"<p><strong>Local storage usage</strong> ".concat(n," <strong>of</strong> ~5mib</p>")+"</div>","<hr />",{template:"fieldset",data:{},as:{content:[{template:"input",data:{label:{text:"Storage driver"},classes:["ui-input--driver","ui-input--wide","ui-input--grow","ui-input--grow-label","ui-input--label-multiline","ui-input--horizontal","ui-input--spaced"],name:"driver",type:"select",value:this.storage.local.get("driver"),options:[{label:"Local storage",value:"local"}]}}]}},"<hr />",'<nav class="ui-text-nav">',{template:"input",data:{label:{text:null},classes:["ui-input--hidden"],name:"import",type:"file"}},'<button class="ui-button ui-button--wide ui-button--icon" data-action="storage.import" type="button"><span class="ui-icon" data-icon="action-import"><span></span></span><span class="ui-button__label">Import from JSON file</span></button>',"<hr />",'<button class="ui-button ui-button--wide ui-button--icon" data-action="storage.export" type="button"><span class="ui-icon" data-icon="action-export"><span></span></span><span class="ui-button__label">Export to JSON file</span></button>',"<hr />",'<button class="ui-button ui-button--wide ui-button--icon" data-action="storage.delete" type="button"><span class="ui-icon" data-icon="action-delete"><span></span></span><span class="ui-button__label">Delete all data</span></button>',"</nav>"],this.showConfirmModal(e,r,(function(){o.debug&&o.debug.warn("Only localStorage available currently")}),(function(t){t.data.icons={confirm:"save"},t.data.i18n={confirm:"Save"}}),(function(t){var e=t.querySelector('[name="import"]'),n=new FileReader;n.addEventListener("load",(function(){o.view.importJSONString(n.result)})),e.addEventListener("change",(function(){n.readAsText(e.files[0])})),o.bindActions({"storage.import":[["click",function(t){t.preventDefault(),e.click()}]],"storage.export":[["click",function(){var t=qs(Ds().mark((function t(e){return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,o.view.export(!0);case 3:n=t.sent,r="nutZtash.json",i=void 0,a=void 0,i=document.createElement("a"),a=window.URL.createObjectURL(n),i.style.display="none",i.href=a,i.download=r,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),i.remove();case 5:case"end":return t.stop()}var n,r,i,a}),t)})));return function(e){return t.apply(this,arguments)}}()]],"storage.delete":[["click",function(){var t=qs(Ds().mark((function t(e){return Ds().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),o.deleteAllData();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()]]},t)}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"showInputErrors",value:function(t,e){for(var n=Object.entries(e),r=null,o=0;o<n.length;o++){var i=Rs(n[o],2),a=i[0],u=i[1],c=t.querySelector('[name="'.concat(a,'"]'));if(c){r||(r=c);var l=c.closest(".ui-input");l.querySelector(".ui-input__error").innerHTML=u instanceof Array?u.join("<br />"):u,l.classList.add("ui-input--error"),l.classList.add("ui-input--error-visible")}else this.debug&&this.debug.warn(this.constructor.name+".showInputErrors(".concat(a,") Unknown field"))}r&&r.focus()}},{key:"showModelModal",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"create",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.storage.models[t],a="modal-model-".concat(r);if(!document.getElementById(a)){if("edit"===r&&!(n instanceof i))throw new tf("Invalid model relation");var u={create:"confirm",edit:"confirm"},c={create:'<span class="ui-icon" data-icon="action-create"><span></span></span><h3 class="ui-modal__dialog-title">Create '.concat(fn(i.modelType)),edit:'<span class="ui-icon" data-icon="action-edit"><span></span></span><h3 class="ui-modal__dialog-title">Edit '.concat(fn(i.modelType))};n&&n.label&&(c.edit="".concat(c.edit," <q>").concat(n.label,"</q>"),c.view="".concat(c.view," <q>").concat(n.label,"</q>"));var l=o&&o.label?" in ".concat(fn(o.type)," <q>").concat(o.label,"</q>"):"",s={create:function(){return i.form(o?{rel:o.id}:null)},edit:function(){return i.form(n.data)}},f={template:"modal",data:{id:a,classes:["ui-modal--".concat(t)],mode:u[r],focusable:!1,header:{custom:c[r]+l+"</h3>",controls:null},icons:{confirm:"save"},i18n:{confirm:"Save"}},as:{content:s[r]()}};i.modalRender&&i.modalRender(f);var p=uo.node(f)[0];p.addEventListener("modal.confirm.confirm",(function(t){var n=i.getFormData(p),r=i.validate(n);!0!==r.valid&&(e.showInputErrors(p,r.errors),t.preventDefault())})),p.addEventListener("modal.initialized",(function(e){var a=e.detail.target;i.bindForm(p,a),i.bind(p,{type:t,model:n,mode:r,parent:o,modal:a}),e.detail.target.open=!0})),p.addEventListener("modal.hidden",(function(t){var a=i.getFormData(p);t.detail.target.dom.remove(),t.detail.target.confirmed&&("create"!==r||n?"edit"===r&&n&&Ws(uf,e).updateModel(n,a):Ws(uf,e).createModel(i,a,o))})),document.body.appendChild(p),Wi.make(p,{mode:u[r],easyHide:Ws(of,this).easyHideModals,focusResetOnHidden:!1,focusLast:[]},[da,ka],this,this.debug)}}},{key:"showConfirmModal",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!document.getElementById("modal-confirm")){var i={template:"modal",data:{id:"modal-confirm-".concat(mt()),mode:"confirm",focusable:!1,header:{title:t}},as:{content:e}};r&&r(i);var a=uo.node(i)[0];return o&&o(a),a.addEventListener("modal.initialized",(function(t){t.detail.target.open=!0})),a.addEventListener("modal.hidden",(function(t){t.detail.target.dom.remove(),t.detail.target.confirmed&&n(t)})),document.body.appendChild(a),Wi.make(a,{mode:"confirm",easyHide:Ws(of,this).easyHideModals},[ka],this,this.debug)}}},{key:"showAlertModal",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!document.getElementById("modal-alert")){var i={template:"modal",data:{id:"modal-alert",mode:"alert",focusable:!1,header:{title:t}},as:{content:e}};r&&r(i);var a=uo.node(i)[0];o&&o(a),a.addEventListener("modal.initialized",(function(t){t.detail.target.open=!0})),a.addEventListener("modal.hidden",(function(t){t.detail.target.dom.remove(),n&&n(t)})),document.body.appendChild(a),Wi.make(a,{mode:"alert",easyHide:Ws(of,this).easyHideModals},[da],this,this.debug)}}},{key:"selectAction",value:function(t,e){return e.querySelectorAll('[data-action="'.concat(t,'"]'))}},{key:"bindActions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!b(t))throw new tf("Invalid action handlers definition");for(var o=e.querySelectorAll("[data-action]"),i=0;i<o.length;i++){var a=o[i],u=a.getAttribute("data-action");t[u]?(n.button=a,n.action=u,Ft([a],this.wrapActionHandlers(t[u],n))):this.debug&&this.debug.warn(this.constructor.name+".bindActions(".concat(u,") action not defined")),r&&r(a,u)}return o}},{key:"wrapActionHandlers",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=function(){var r=t[o].slice(),i=r[1];r[1]=function(t){i(t,e)},n.push(r)},o=0;o<t.length;o++)r();return n}}]);var n,r,o,i,a,u,c}(W);function df(){document.documentElement.style.setProperty("--scrollbar-width",function(){var t=document.createElement("div"),e=document.createElement("div");t.setAttribute("style",["z-index:-1","position:fixed","width:50vw;","height:50vh;","visibility:hidden","overflow:scroll","-ms-overflow-style:scrollbar"].join(";")),e.setAttribute("style","display:block;width:100%;height:100vh"),t.appendChild(e),document.body.appendChild(t);var n=t.offsetWidth-e.offsetWidth;return document.body.removeChild(t),n}()+"px")}var hf="#debug"===location.hash?console:null;window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),window._deferredInstallPrompt=t;var e=document.querySelector('#header [data-action="app.install"]');e&&(e.style.display="")}));var yf=new pf("1.0.0","https://squirrel-forge.github.io/nutztash/",function(t){Ft(document.querySelectorAll('[data-nav="show"], [data-nav="hide"]'),[["click",function(t){t.preventDefault(),this.focus()}]]);var e=new pt(null,t);return e.config.offset=function(){var t,e;return null!==(t=null===(e=document.getElementById("header"))||void 0===e?void 0:e.getBoundingClientRect().height)&&void 0!==t?t:0},window.addEventListener("resize",Yt((function(){df()}))),e}(hf),hf);J((function(){var t;df(),null===(t=yf.boot())||void 0===t||t.catch((function(t){window.console.error("Please report the following bug to: https://github.com/squirrel-forge/nutztash/issues"),window.console.error(t),alert('You have encountered a bug "'.concat(t.toString(),'"'))}))}))}();